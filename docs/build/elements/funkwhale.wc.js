!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function d(){return u(" ")}function p(){return u("")}function f(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function m(t){return function(e){return e.preventDefault(),t.call(this,e)}}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t){return""===t?null:+t}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function y(t,e,n,s){t.style.setProperty(e,n,s?"important":"")}function v(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}t.selectedIndex=-1}function w(t){const e={};for(const n of t)e[n.name]=n.value;return e}let x;function k(t){x=t}function _(){if(!x)throw new Error("Function called outside component initialization");return x}function I(){const t=_();return(e,n)=>{const s=t.$$.callbacks[e];if(s){const o=function(t,e,n=!1){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,!1,e),s}(e,n);s.slice().forEach((e=>{e.call(t,o)}))}}}function E(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const N=[],P=[],C=[],S=[],M=Promise.resolve();let A=!1;function D(t){C.push(t)}function R(t){S.push(t)}let O=!1;const T=new Set;function j(){if(!O){O=!0;do{for(let t=0;t<N.length;t+=1){const e=N[t];k(e),z(e.$$)}for(k(null),N.length=0;P.length;)P.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];T.has(e)||(T.add(e),e())}C.length=0}while(N.length);for(;S.length;)S.pop()();A=!1,O=!1,T.clear()}}function z(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(D)}}const L=new Set;let U,F;function V(){U={r:0,c:[],p:U}}function q(){U.r||s(U.c),U=U.p}function H(t,e){t&&t.i&&(L.delete(t),t.i(e))}function B(t,e,n,s){if(t&&t.o){if(L.has(t))return;L.add(t),U.c.push((()=>{L.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}function G(t,e){t.d(1),e.delete(t.key)}function Y(t,e){B(t,1,1,(()=>{e.delete(t.key)}))}function W(t,e,n,s,o,i,r,l,a,c,u,d){let p=t.length,f=i.length,m=p;const h={};for(;m--;)h[t[m].key]=m;const g=[],$=new Map,b=new Map;for(m=f;m--;){const t=d(o,i,m),l=n(t);let a=r.get(l);a?s&&a.p(t,e):(a=c(l,t),a.c()),$.set(l,g[m]=a),l in h&&b.set(l,Math.abs(m-h[l]))}const y=new Set,v=new Set;function w(t){H(t,1),t.m(l,u),r.set(t.key,t),u=t.first,f--}for(;p&&f;){const e=g[f-1],n=t[p-1],s=e.key,o=n.key;e===n?(u=e.first,p--,f--):$.has(o)?!r.has(s)||y.has(s)?w(e):v.has(o)?p--:b.get(s)>b.get(o)?(v.add(s),w(e)):(y.add(o),p--):(a(n,r),p--)}for(;p--;){const e=t[p];$.has(e.key)||a(e,r)}for(;f;)w(g[f-1]);return g}function J(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function K(t){t&&t.c()}function X(t,n,i,r){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=t.$$;l&&l.m(n,i),r||D((()=>{const n=a.map(e).filter(o);c?c.push(...n):s(n),t.$$.on_mount=[]})),u.forEach(D)}function Q(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(t,e){-1===t.$$.dirty[0]&&(N.push(t),A||(A=!0,M.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function tt(e,o,i,r,l,c,u,d=[-1]){const p=x;k(e);const f=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(p?p.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:o.target||p.$$.root};u&&u(f.root);let m=!1;if(f.ctx=i?i(e,o.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return f.ctx&&l(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),m&&Z(e,t)),n})):[],f.update(),m=!0,s(f.before_update),f.fragment=!!r&&r(f.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);f.fragment&&f.fragment.l(t),t.forEach(a)}else f.fragment&&f.fragment.c();o.intro&&H(e.$$.fragment),X(e,o.target,o.anchor,o.customElement),j()}k(p)}var et;"function"==typeof HTMLElement&&(F=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(o);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){s(this.$$.on_disconnect)}$destroy(){Q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var nt=new Uint8Array(16);function st(){if(!et&&!(et="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return et(nt)}var ot=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function it(t){return"string"==typeof t&&ot.test(t)}for(var rt,lt,at,ct,ut=[],dt=0;dt<256;++dt)ut.push((dt+256).toString(16).substr(1));function pt(t,e,n){var s=(t=t||{}).random||(t.rng||st)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=s[o];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(ut[t[e+0]]+ut[t[e+1]]+ut[t[e+2]]+ut[t[e+3]]+"-"+ut[t[e+4]]+ut[t[e+5]]+"-"+ut[t[e+6]]+ut[t[e+7]]+"-"+ut[t[e+8]]+ut[t[e+9]]+"-"+ut[t[e+10]]+ut[t[e+11]]+ut[t[e+12]]+ut[t[e+13]]+ut[t[e+14]]+ut[t[e+15]]).toLowerCase();if(!it(n))throw TypeError("Stringified UUID is invalid");return n}(s)}function ft(t){const e=+t;return"number"==typeof e&&!isNaN(e)&&e>0&&e.toFixed(0)===e.toString()}class mt{constructor(t="NW"+pt().split("-")[0],e="10.20.0.0/16"){this.name=t,this.ipRange=e}get valid(){const{name:t,ipRange:e}=this;return""!==t&&""!==e}}class ht{constructor(t=pt(),e="SSH_KEY",n="ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDTwULSsUubOq3VPWL6cdrDvexDmjfznGydFPyaNcn7gAL9lRxwFbCDPMj7MbhNSpxxHV2+/iJPQOTVJu4oc1N7bPP3gBCnF51rPrhTpGCt5pBbTzeyNweanhedkKDsCO2mIEh/92Od5Hg512dX4j7Zw6ipRWYSaepapfyoRnNSriW/s3DH/uewezVtL5EuypMdfNngV/u2KZYWoeiwhrY/yEUykQVUwDysW/xUJNP5o+KSTAvNSJatr3FbuCFuCjBSvageOLHePTeUwu6qjqe+Xs4piF1ByO/6cOJ8bt5Vcx0bAtI8/MPApplUU/JWevsPNApvnA/ntffI+u8DCwgP"){this.id=t,this.key=e,this.value=n}get valid(){const{key:t,value:e}=this;return""!==t&&""!==e}}class gt{constructor(t=pt(),e="VM"+t.split("-")[0],n="https://hub.grid.tf/tf-official-apps/base:latest.flist",s=4,o=8192,i="/sbin/zinit init",r=!0,l=1,a=25,c=new mt,u=[],d=[],p=!1){this.id=t,this.name=e,this.flist=n,this.cpu=s,this.memory=o,this.entrypoint=i,this.planetary=r,this.nodeId=l,this.rootFsSize=a,this.network=c,this.envs=u,this.disks=d,this.publicIp=p}get valid(){const{name:t,flist:e,cpu:n,memory:s,entrypoint:o,nodeId:i}=this,{rootFsSize:r,network:l,envs:a,disks:c}=this;return""!==t&&""!==e&&""!==o&&ft(n)&&ft(s)&&ft(i)&&ft(r)&&l.valid&&a.reduce(((t,e)=>t&&e.valid),!0)&&c.reduce(((t,e)=>t&&e.valid),!0)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */async function $t(t,e){return 0==(await t.gateway.getObj(e)).length?e:e+Math.floor(1e3*Math.random())}const{HTTPMessageBusClient:bt}=null!==(lt=null===(rt=window.configs)||void 0===rt?void 0:rt.client)&&void 0!==lt?lt:{},{DiskModel:yt,MachineModel:vt,MachinesModel:wt,GridClient:xt,GatewayNameModel:kt,NetworkModel:_t,Nodes:It}=null!==(ct=null===(at=window.configs)||void 0===at?void 0:at.grid3_client)&&void 0!==ct?ct:{};let Et,Nt;async function Pt(t,e){const n=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]])}return n}(t,["envs","disks"]);let{name:s,flist:o,cpu:i,memory:r,entrypoint:l,network:a}=n;const{publicIp:c,planetary:u,nodeId:d,rootFsSize:p}=n,{mnemonics:f,storeSecret:m,networkEnv:h}=e,g=new bt(0,""),$=new xt(h,f,m,g,void 0,"tfkvstore");await $.connect(),s=await $t($,s),console.log(s);const b=new It(xt.config.graphqlURL,xt.config.rmbClient.proxyURL),y=await async function(t,e){const n=await async function(t){return await t.getAccessNodes()}(t);return n[e].domain}(b,8);Et=`${s}.${y}`;const v=new _t;v.name=s+"NW",v.ip_range="10.1.0.0/16",await async function(t,e,n,s,o){const i=new yt;i.name=e+"Disk",i.size=10,i.mountpoint="/data";const r=new vt;r.name=e,r.node_id=s,r.disks=[i],r.public_ip=!1,r.planetary=!0,r.cpu=4,r.memory=8192,r.rootfs_size=2,r.flist="https://hub.grid.tf/omar0.3bot/omarelawady-funk-latest.flist",r.entrypoint="/init.sh",r.env={FUNKWHALE_HOSTNAME:o};const l=new wt;return l.name=e,l.network=n,l.machines=[r],t.machines.deploy(l)}($,s,v,d,Et);const w=await async function(t,e){return await t.machines.getObj(e)}($,s);Nt=w[0].yggIP,await async function(t,e,n){const s=new kt;return s.name=e,s.node_id=8,s.tls_passthrough=!1,s.backends=[`http://[${n}]:80/`],t.gateway.deploy_name(s)}($,s,Nt);const x=await async function(t,e){return await t.gateway.getObj(e)}($,s);x[0].domain}function Ct(e){return{c(){this.c=t},m:t,p:t,i:t,o:t,d:t}}function St(t){var e;const n=null===(e=window.configs)||void 0===e?void 0:e.baseConfig,s=I();let o;var i;return i=()=>{o=n.subscribe((()=>{s("profile",n.getActiveProfile())}))},_().$$.on_mount.push(i),function(t){_().$$.on_destroy.push(t)}((()=>{o()})),[]}class Mt extends F{constructor(t){super(),tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},St,Ct,i,{},null),t&&t.target&&l(t.target,this,t.anchor)}}function At(t,e,n){const s=t.slice();return s[21]=e[n],s}function Dt(t){let e,n,s;function o(t,e){return null==n&&(n=!!t[6]()),n?Tt:"checkbox"===t[1].type?Ot:"select"===t[1].type?Rt:void 0}let i=o(t),u=i&&i(t),p=t[1].tooltip&&Bt(t);return{c(){e=c("div"),u&&u.c(),s=d(),p&&p.c(),h(e,"class","tooltip mb-2")},m(t,n){l(t,e,n),u&&u.m(e,null),r(e,s),p&&p.m(e,null)},p(t,n){i===(i=o(t))&&u?u.p(t,n):(u&&u.d(1),u=i&&i(t),u&&(u.c(),u.m(e,s))),t[1].tooltip?p?p.p(t,n):(p=Bt(t),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},d(t){t&&a(e),u&&u.d(),p&&p.d()}}}function Rt(t){let e,n,o,i,u,p,m,g,$=[],b=new Map,w=t[1].label&&jt(t),x=t[1].options;const k=t=>t[21].value;for(let e=0;e<x.length;e+=1){let n=At(t,x,e),s=k(n);b.set(s,$[e]=zt(s,n))}let _=(t[1].error||t[2])&&Lt(t);return{c(){w&&w.c(),e=d(),n=c("div"),o=c("select");for(let t=0;t<$.length;t+=1)$[t].c();u=d(),_&&_.c(),o.disabled=i=t[1].disabled,y(o,"width","100%"),void 0===t[0]&&D((()=>t[19].call(o))),h(n,"class",p="select mb-2"+(t[1].error||t[2]?" is-danger":"")),y(n,"width","100%"),h(n,"id",t[5])},m(s,i){w&&w.m(s,i),l(s,e,i),l(s,n,i),r(n,o);for(let t=0;t<$.length;t+=1)$[t].m(o,null);v(o,t[0]),r(n,u),_&&_.m(n,null),m||(g=[f(o,"change",t[19]),f(o,"change",t[7])],m=!0)},p(t,s){t[1].label?w?w.p(t,s):(w=jt(t),w.c(),w.m(e.parentNode,e)):w&&(w.d(1),w=null),2&s&&(x=t[1].options,$=W($,s,k,1,t,x,b,o,G,zt,null,At)),2&s&&i!==(i=t[1].disabled)&&(o.disabled=i),3&s&&v(o,t[0]),t[1].error||t[2]?_?_.p(t,s):(_=Lt(t),_.c(),_.m(n,null)):_&&(_.d(1),_=null),6&s&&p!==(p="select mb-2"+(t[1].error||t[2]?" is-danger":""))&&h(n,"class",p)},d(t){w&&w.d(t),t&&a(e),t&&a(n);for(let t=0;t<$.length;t+=1)$[t].d();_&&_.d(),m=!1,s(g)}}}function Ot(t){let e,n,o,i,p,m,g,b,v,w,x,k=t[1].label+"";return{c(){e=c("div"),n=c("label"),o=c("input"),p=d(),m=c("span"),g=d(),b=c("label"),v=u(k),h(o,"class","switch__input"),h(o,"type","checkbox"),h(o,"id",t[5]),o.disabled=i=t[1].disabled,h(m,"class","slider"),h(n,"class","switch"),h(b,"for",t[5]),h(b,"class","label ml-2"),y(b,"cursor","pointer"),y(e,"display","flex"),y(e,"align-items","center"),h(e,"class","mb-2")},m(s,i){l(s,e,i),r(e,n),r(n,o),o.checked=t[0],r(n,p),r(n,m),r(e,g),r(e,b),r(b,v),w||(x=[f(o,"change",t[18]),f(o,"input",t[11])],w=!0)},p(t,e){2&e&&i!==(i=t[1].disabled)&&(o.disabled=i),3&e&&(o.checked=t[0]),2&e&&k!==(k=t[1].label+"")&&$(v,k)},d(t){t&&a(e),w=!1,s(x)}}}function Tt(t){let e,n,s,o,i,p,f,m=t[1].label+"";function g(t,e){return"textarea"===t[1].type?qt:"text"===t[1].type?Vt:"number"===t[1].type?Ft:"password"===t[1].type?Ut:void 0}let b=g(t),y=b&&b(t),v=(t[1].error||t[2])&&Ht(t);return{c(){e=c("div"),n=c("p"),s=u(m),o=d(),i=c("div"),y&&y.c(),f=d(),v&&v.c(),h(n,"class","label"),h(i,"class",p="control"+("password"===t[1].type?" has-icons-right":"")),h(e,"class","field"),h(e,"id",t[5])},m(t,a){l(t,e,a),r(e,n),r(n,s),r(e,o),r(e,i),y&&y.m(i,null),r(e,f),v&&v.m(e,null)},p(t,n){2&n&&m!==(m=t[1].label+"")&&$(s,m),b===(b=g(t))&&y?y.p(t,n):(y&&y.d(1),y=b&&b(t),y&&(y.c(),y.m(i,null))),2&n&&p!==(p="control"+("password"===t[1].type?" has-icons-right":""))&&h(i,"class",p),t[1].error||t[2]?v?v.p(t,n):(v=Ht(t),v.c(),v.m(e,null)):v&&(v.d(1),v=null)},d(t){t&&a(e),y&&y.d(),v&&v.d()}}}function jt(t){let e,n,s=t[1].label+"";return{c(){e=c("p"),n=u(s),h(e,"class","label")},m(t,s){l(t,e,s),r(e,n)},p(t,e){2&e&&s!==(s=t[1].label+"")&&$(n,s)},d(t){t&&a(e)}}}function zt(t,e){let n,s,o,i,p,f,m=e[21].label+"";return{key:t,first:null,c(){n=c("option"),s=u(m),o=d(),n.__value=i=e[21].value,n.value=n.__value,n.selected=p=e[21].selected,n.disabled=f=e[21].disabled,this.first=n},m(t,e){l(t,n,e),r(n,s),r(n,o)},p(t,o){e=t,2&o&&m!==(m=e[21].label+"")&&$(s,m),2&o&&i!==(i=e[21].value)&&(n.__value=i,n.value=n.__value),2&o&&p!==(p=e[21].selected)&&(n.selected=p),2&o&&f!==(f=e[21].disabled)&&(n.disabled=f)},d(t){t&&a(n)}}}function Lt(t){let e,n,s=(t[1].error||t[2])+"";return{c(){e=c("p"),n=u(s),h(e,"class","help is-danger")},m(t,s){l(t,e,s),r(e,n)},p(t,e){6&e&&s!==(s=(t[1].error||t[2])+"")&&$(n,s)},d(t){t&&a(e)}}}function Ut(t){let e,n,o,i,u,p,m,g,$,v;return{c(){e=c("input"),u=d(),p=c("span"),m=c("i"),h(e,"type","password"),h(e,"class",n="input"+(t[1].error||t[2]?" is-danger":"")),h(e,"placeholder",o=t[1].placeholder),e.disabled=i=t[1].disabled,h(m,"class",g="fas "+(t[3]?"far fa-eye-slash":"fa-eye")),y(p,"position","absolute"),y(p,"top","50%"),y(p,"right","15px"),y(p,"transform","translateY(-50%)"),y(p,"cursor","pointer")},m(n,s){l(n,e,s),b(e,t[0]),t[16](e),l(n,u,s),l(n,p,s),r(p,m),$||(v=[f(e,"input",t[15]),f(e,"input",t[8]),f(p,"click",t[17])],$=!0)},p(t,s){6&s&&n!==(n="input"+(t[1].error||t[2]?" is-danger":""))&&h(e,"class",n),2&s&&o!==(o=t[1].placeholder)&&h(e,"placeholder",o),2&s&&i!==(i=t[1].disabled)&&(e.disabled=i),3&s&&e.value!==t[0]&&b(e,t[0]),8&s&&g!==(g="fas "+(t[3]?"far fa-eye-slash":"fa-eye"))&&h(m,"class",g)},d(n){n&&a(e),t[16](null),n&&a(u),n&&a(p),$=!1,s(v)}}}function Ft(t){let e,n,o,i,r,u;return{c(){e=c("input"),h(e,"type","number"),h(e,"class",n="input"+(t[1].error||t[2]?" is-danger":"")),h(e,"placeholder",o=t[1].placeholder),e.disabled=i=t[1].disabled},m(n,s){l(n,e,s),b(e,t[0]),r||(u=[f(e,"input",t[14]),f(e,"input",t[8])],r=!0)},p(t,s){6&s&&n!==(n="input"+(t[1].error||t[2]?" is-danger":""))&&h(e,"class",n),2&s&&o!==(o=t[1].placeholder)&&h(e,"placeholder",o),2&s&&i!==(i=t[1].disabled)&&(e.disabled=i),3&s&&g(e.value)!==t[0]&&b(e,t[0])},d(t){t&&a(e),r=!1,s(u)}}}function Vt(t){let e,n,o,i,r,u;return{c(){e=c("input"),h(e,"type","text"),h(e,"class",n="input"+(t[1].error||t[2]?" is-danger":"")),h(e,"placeholder",o=t[1].placeholder),e.disabled=i=t[1].disabled},m(n,s){l(n,e,s),b(e,t[0]),r||(u=[f(e,"input",t[13]),f(e,"input",t[8])],r=!0)},p(t,s){6&s&&n!==(n="input"+(t[1].error||t[2]?" is-danger":""))&&h(e,"class",n),2&s&&o!==(o=t[1].placeholder)&&h(e,"placeholder",o),2&s&&i!==(i=t[1].disabled)&&(e.disabled=i),3&s&&e.value!==t[0]&&b(e,t[0])},d(t){t&&a(e),r=!1,s(u)}}}function qt(t){let e,n,o,i,r,u;return{c(){e=c("textarea"),h(e,"class",n="textarea"+(t[1].error||t[2]?" is-danger":"")),h(e,"placeholder",o=t[1].placeholder),e.disabled=i=t[1].disabled},m(n,s){l(n,e,s),b(e,t[0]),r||(u=[f(e,"input",t[12]),f(e,"input",t[8])],r=!0)},p(t,s){6&s&&n!==(n="textarea"+(t[1].error||t[2]?" is-danger":""))&&h(e,"class",n),2&s&&o!==(o=t[1].placeholder)&&h(e,"placeholder",o),2&s&&i!==(i=t[1].disabled)&&(e.disabled=i),3&s&&b(e,t[0])},d(t){t&&a(e),r=!1,s(u)}}}function Ht(t){let e,n,s=(t[1].error||t[2])+"";return{c(){e=c("p"),n=u(s),h(e,"class","help is-danger")},m(t,s){l(t,e,s),r(e,n)},p(t,e){6&e&&s!==(s=(t[1].error||t[2])+"")&&$(n,s)},d(t){t&&a(e)}}}function Bt(t){let e,n,s=t[1].tooltip+"";return{c(){e=c("span"),n=u(s),h(e,"class","tooltip__text")},m(t,s){l(t,e,s),r(e,n)},p(t,e){2&e&&s!==(s=t[1].tooltip+"")&&$(n,s)},d(t){t&&a(e)}}}function Gt(e){let n,s,o,i=e[1]&&Dt(e);return{c(){n=c("div"),s=d(),i&&i.c(),o=p(),this.c=t},m(t,r){l(t,n,r),n.innerHTML=e[9],l(t,s,r),i&&i.m(t,r),l(t,o,r)},p(t,[e]){t[1]?i?i.p(t,e):(i=Dt(t),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},i:t,o:t,d(t){t&&a(n),t&&a(s),i&&i.d(t),t&&a(o)}}}function Yt(t,e,n){const s=I();let{field:o}=e,{data:i}=e,{selected:r=0}=e;const l=pt();let a;let c,u=!1;return t.$$set=t=>{"field"in t&&n(1,o=t.field),"data"in t&&n(0,i=t.data),"selected"in t&&n(10,r=t.selected)},[i,o,a,u,c,l,()=>["text","number","password","textarea"].includes(o.type),function(t){s("input",t);const e=t.target;n(10,r=e.selectedIndex)},function(t){if(o.validator){const e=t.target;n(2,a=o.validator(e.value))}s("input",t)},'\n<style>\n  @import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css");\n\n  .switch {\n    position: relative;\n    display: inline-block;\n    width: 60px;\n    height: 34px;\n  }\n\n  .switch .switch__input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n\n  .slider {\n    position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #ccc;\n    -webkit-transition: 0.4s;\n    transition: 0.4s;\n    border-radius: 34px;\n  }\n\n  .slider:before {\n    position: absolute;\n    content: "";\n    height: 26px;\n    width: 26px;\n    left: 4px;\n    bottom: 4px;\n    background-color: white;\n    -webkit-transition: 0.4s;\n    transition: 0.4s;\n    border-radius: 50%;\n  }\n\n  .switch__input:checked + .slider {\n    background-color: #2196f3;\n  }\n\n  .switch__input:checked + .slider {\n    box-shadow: 0 0 1px #2196f3;\n  }\n\n  .switch__input:checked + .slider:before {\n    -webkit-transform: translateX(26px);\n    -ms-transform: translateX(26px);\n    transform: translateX(26px);\n  }\n\n  .tooltip {\n    position: relative;\n  }\n\n  .tooltip__text {\n    position: absolute;\n    top: -20px;\n    left: 50%;\n    padding: 10px 15px;\n    border-radius: 5px;\n    background-color: rgba(51, 51, 51, 0.9);\n    color: white;\n    z-index: 9;\n    max-width: min(1000px, calc(100% - 30px));\n    display: block;\n\n    transition-property: opacity, transform, visibility;\n    transition-timing-function: ease;\n    transition-duration: 300ms;\n    pointer-events: none;\n    opacity: 0;\n    visibility: hidden;\n    transform: translateX(-50%) translateY(20px) scale(0);\n  }\n\n  .tooltip:hover > .tooltip__text {\n    pointer-events: all;\n    opacity: 1;\n    visibility: visible;\n    transform: translateX(-50%) translateY(0) scale(1);\n  }\n</style>\n',r,function(e){E.call(this,t,e)},function(){i=this.value,n(0,i),n(1,o)},function(){i=this.value,n(0,i),n(1,o)},function(){i=g(this.value),n(0,i),n(1,o)},function(){i=this.value,n(0,i),n(1,o)},function(t){P[t?"unshift":"push"]((()=>{c=t,n(4,c)}))},()=>{n(3,u=!u),n(4,c.type=u?"text":"password",c)},function(){i=this.checked,n(0,i),n(1,o)},function(){i=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(0,i),n(1,o)}]}customElements.define("tf-select-profile",Mt);class Wt extends F{constructor(t){super(),tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Yt,Gt,i,{field:1,data:0,selected:10},null),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),j()))}static get observedAttributes(){return["field","data","selected"]}get field(){return this.$$.ctx[1]}set field(t){this.$$set({field:t}),j()}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),j()}get selected(){return this.$$.ctx[10]}set selected(t){this.$$set({selected:t}),j()}}function Jt(t,e,n){const s=t.slice();return s[7]=e[n],s[9]=n,s}function Kt(t){let e,n=[],s=new Map,o=t[1];const i=t=>t[7].label;for(let e=0;e<o.length;e+=1){let r=Jt(t,o,e),l=i(r);s.set(l,n[e]=Qt(l,r))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=p()},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);l(t,e,s)},p(t,r){51&r&&(o=t[1],n=W(n,r,i,1,t,o,s,e.parentNode,G,Qt,e,Jt))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&a(e)}}}function Xt(t){let e,n,s;return{c(){e=c("button"),h(e,"class","ml-2 is-small delete")},m(i,r){var a;l(i,e,r),n||(s=f(e,"click",(a=m((function(){o(t[4](t[9]))&&t[4](t[9]).apply(this,arguments)})),function(t){return t.stopPropagation(),a.call(this,t)})),n=!0)},p(e,n){t=e},d(t){t&&a(e),n=!1,s()}}}function Qt(t,e){let n,s,i,p,g,b,y,v,w,x=e[7].label+"",k=e[7].removable&&Xt(e);return{key:t,first:null,c(){n=c("li"),s=c("a"),i=c("span"),p=u(x),g=d(),k&&k.c(),b=d(),h(s,"href","#!"),h(n,"class",y=e[0]===e[7].value?"is-active":""),this.first=n},m(t,a){l(t,n,a),r(n,s),r(s,i),r(i,p),r(s,g),k&&k.m(s,null),r(n,b),v||(w=f(s,"click",m((function(){o(e[5].bind(void 0,e[7].value))&&e[5].bind(void 0,e[7].value).apply(this,arguments)}))),v=!0)},p(t,o){e=t,2&o&&x!==(x=e[7].label+"")&&$(p,x),e[7].removable?k?k.p(e,o):(k=Xt(e),k.c(),k.m(s,null)):k&&(k.d(1),k=null),3&o&&y!==(y=e[0]===e[7].value?"is-active":"")&&h(n,"class",y)},d(t){t&&a(n),k&&k.d(),v=!1,w()}}}function Zt(e){let n,s,o,i,u=e[1]&&Kt(e);return{c(){n=c("div"),s=c("ul"),u&&u.c(),this.c=t,h(s,"style",o=e[3]?"pointer-events: none; cursor: default;":""),h(n,"class",i="tabs "+(e[2]?"is-centered":""))},m(t,e){l(t,n,e),r(n,s),u&&u.m(s,null)},p(t,[e]){t[1]?u?u.p(t,e):(u=Kt(t),u.c(),u.m(s,null)):u&&(u.d(1),u=null),8&e&&o!==(o=t[3]?"pointer-events: none; cursor: default;":"")&&h(s,"style",o),4&e&&i!==(i="tabs "+(t[2]?"is-centered":""))&&h(n,"class",i)},i:t,o:t,d(t){t&&a(n),u&&u.d()}}}function te(t,e,n){const s=I();let{tabs:o}=e,{active:i}=e,{centered:r=!0}=e,{disabled:l=!1}=e;return t.$$set=t=>{"tabs"in t&&n(1,o=t.tabs),"active"in t&&n(0,i=t.active),"centered"in t&&n(2,r=t.centered),"disabled"in t&&n(3,l=t.disabled)},[i,o,r,l,t=>()=>s("removed",t),function(t){i!==t&&(n(0,i=t),s("select",t))}]}customElements.define("tf-input",Wt);class ee extends F{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},te,Zt,i,{tabs:1,active:0,centered:2,disabled:3},null),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),j()))}static get observedAttributes(){return["tabs","active","centered","disabled"]}get tabs(){return this.$$.ctx[1]}set tabs(t){this.$$set({tabs:t}),j()}get active(){return this.$$.ctx[0]}set active(t){this.$$set({active:t}),j()}get centered(){return this.$$.ctx[2]}set centered(t){this.$$set({centered:t}),j()}get disabled(){return this.$$.ctx[3]}set disabled(t){this.$$set({disabled:t}),j()}}var ne,se;customElements.define("tf-tabs",ee);const{GridClient:oe,Nodes:ie}=null!==(se=null===(ne=window.configs)||void 0===ne?void 0:ne.grid3_client)&&void 0!==se?se:{};function re(t,e){return new Promise((async n=>{const{networkEnv:s}=e,o=new oe("","","",null),{graphql:i,rmbProxy:r}=o.getDefaultUrls(s),l=new ie(i,r);try{const e=await l.filterNodes(t);n(e.map((t=>({label:`NodeID(${t.nodeId})`,value:t.nodeId}))))}catch(t){console.log("Error findNodes",t),n([])}}))}var le,ae;const{GridClient:ce}=null!==(ae=null===(le=window.configs)||void 0===le?void 0:le.grid3_client)&&void 0!==ae?ae:{};function ue(t,e,n={}){const{networkEnv:s}=t,o=new ce("","","",null),{graphql:i}=o.getDefaultUrls(s);return fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,variables:n})}).then((t=>t.json())).then((({data:t})=>t))}function de(t,e,n,s,o,i){return re({cru:e,mru:n/1024,sru:s,publicIPs:o},t).then((t=>t.some((t=>+t.value==+i)))).then((t=>t?null:`The selected node(${i}) doesn't have enough resources. CRU(${e}) MRU(${n}) SRU(${s}) PublicIP(${o})`)).catch((()=>`The selected node(${i}) doesn't have enough resources. CRU(${e}) MRU(${n}) SRU(${s}) PublicIP(${o})`))}function pe(t,e,n){const s=t.slice();return s[24]=e[n],s[25]=e,s[26]=n,s}function fe(t){let e,n,s,o,i,r;function c(e){t[20](e)}let u={field:{label:"Node ID",symbol:"nodeId",type:"number",placeholder:"Your Node ID",error:t[1]}};void 0!==t[0]&&(u.data=t[0]),e=new Wt({props:u}),P.push((()=>J(e,"data",c)));let f=t[5]&&he(t),m=t[4]&&ge(t);return{c(){K(e.$$.fragment),s=d(),f&&f.c(),o=d(),m&&m.c(),i=p()},m(t,n){X(e,t,n),l(t,s,n),f&&f.m(t,n),l(t,o,n),m&&m.m(t,n),l(t,i,n),r=!0},p(t,s){const r={};2&s&&(r.field={label:"Node ID",symbol:"nodeId",type:"number",placeholder:"Your Node ID",error:t[1]}),!n&&1&s&&(n=!0,r.data=t[0],R((()=>n=!1))),e.$set(r),t[5]?f?f.p(t,s):(f=he(t),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null),t[4]?m?m.p(t,s):(m=ge(t),m.c(),m.m(i.parentNode,i)):m&&(m.d(1),m=null)},i(t){r||(H(e.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),r=!1},d(t){Q(e,t),t&&a(s),f&&f.d(t),t&&a(o),m&&m.d(t),t&&a(i)}}}function me(t){let e,n,s,o,i,p,m,g,$,b,y,v,w=[],x=new Map,k=t[6];const _=t=>t[24].symbol;for(let e=0;e<k.length;e+=1){let n=pe(t,k,e),s=_(n);x.set(s,w[e]=$e(s,n))}function I(e){t[19](e)}let E={field:t[7]};return void 0!==t[0]&&(E.data=t[0]),g=new Wt({props:E}),P.push((()=>J(g,"data",I))),{c(){e=c("h5"),e.textContent="Nodes Filter",n=d();for(let t=0;t<w.length;t+=1)w[t].c();s=d(),o=c("button"),i=u("Apply filters and suggest nodes"),m=d(),K(g.$$.fragment),h(e,"class","is-size-5 has-text-weight-bold"),h(o,"class",p="button is-primary mt-2 "+(t[3]?"is-loading":"")),o.disabled=t[3],h(o,"type","button")},m(a,c){l(a,e,c),l(a,n,c);for(let t=0;t<w.length;t+=1)w[t].m(a,c);l(a,s,c),l(a,o,c),r(o,i),l(a,m,c),X(g,a,c),b=!0,y||(v=f(o,"click",t[10]),y=!0)},p(t,e){320&e&&(k=t[6],V(),w=W(w,e,_,1,t,k,x,s.parentNode,Y,$e,s,pe),q()),(!b||8&e&&p!==(p="button is-primary mt-2 "+(t[3]?"is-loading":"")))&&h(o,"class",p),(!b||8&e)&&(o.disabled=t[3]);const n={};128&e&&(n.field=t[7]),!$&&1&e&&($=!0,n.data=t[0],R((()=>$=!1))),g.$set(n)},i(t){if(!b){for(let t=0;t<k.length;t+=1)H(w[t]);H(g.$$.fragment,t),b=!0}},o(t){for(let t=0;t<w.length;t+=1)B(w[t]);B(g.$$.fragment,t),b=!1},d(t){t&&a(e),t&&a(n);for(let e=0;e<w.length;e+=1)w[e].d(t);t&&a(s),t&&a(o),t&&a(m),Q(g,t),y=!1,v()}}}function he(t){let e,n;return{c(){e=c("p"),n=u(t[5]),h(e,"class","help is-success")},m(t,s){l(t,e,s),r(e,n)},p(t,e){32&e&&$(n,t[5])},d(t){t&&a(e)}}}function ge(t){let e,n;return{c(){e=c("p"),n=u(t[4]),h(e,"class","help is-danger")},m(t,s){l(t,e,s),r(e,n)},p(t,e){16&e&&$(n,t[4])},d(t){t&&a(e)}}}function $e(t,e){let n,s,o,i;function r(t){e[18](t,e[24])}let c={field:e[24]};return void 0!==e[8][e[24].symbol]&&(c.data=e[8][e[24].symbol]),s=new Wt({props:c}),P.push((()=>J(s,"data",r))),{key:t,first:null,c(){n=p(),K(s.$$.fragment),this.first=n},m(t,e){l(t,n,e),X(s,t,e),i=!0},p(t,n){e=t;const i={};64&n&&(i.field=e[24]),!o&&320&n&&(o=!0,i.data=e[8][e[24].symbol],R((()=>o=!1))),s.$set(i)},i(t){i||(H(s.$$.fragment,t),i=!0)},o(t){B(s.$$.fragment,t),i=!1},d(t){t&&a(n),Q(s,t)}}}function be(e){let n,s,o,i,r,c,u;function f(t){e[17](t)}let m={field:e[9]};void 0!==e[2]&&(m.data=e[2]),n=new Wt({props:m}),P.push((()=>J(n,"data",f)));const h=[me,fe],g=[];function $(t,e){return"automatic"===t[2]?0:"manual"===t[2]?1:-1}return~(i=$(e))&&(r=g[i]=h[i](e)),{c(){K(n.$$.fragment),o=d(),r&&r.c(),c=p(),this.c=t},m(t,e){X(n,t,e),l(t,o,e),~i&&g[i].m(t,e),l(t,c,e),u=!0},p(t,[e]){const o={};!s&&4&e&&(s=!0,o.data=t[2],R((()=>s=!1))),n.$set(o);let l=i;i=$(t),i===l?~i&&g[i].p(t,e):(r&&(V(),B(g[l],1,1,(()=>{g[l]=null})),q()),~i?(r=g[i],r?r.p(t,e):(r=g[i]=h[i](t),r.c()),H(r,1),r.m(c.parentNode,c)):r=null)},i(t){u||(H(n.$$.fragment,t),H(r),u=!0)},o(t){B(n.$$.fragment,t),B(r),u=!1},d(t){Q(n,t),t&&a(o),~i&&g[i].d(t),t&&a(c)}}}function ye(t,e,n){let{cpu:s}=e,{memory:o}=e,{ssd:i}=e,{publicIp:r}=e,{error:l=null}=e,{data:a}=e,{profile:c}=e,u=!1,d="",p="";function f(t="",e=""){n(5,p=t),n(4,d=e)}const m=[{label:"Farm Name",symbol:"farmName",type:"select",placeholder:"Enter farm name",options:[{label:"Please select a farm",value:null,selected:!0}]},{label:"Country",symbol:"country",type:"select",placeholder:"Enter a country name",options:[{label:"Please select a country",value:null,selected:!0}]},{label:"CPU (Cores)",symbol:"cru",type:"number",placeholder:"Enter CPU"},{label:"Memory (GB)",symbol:"mru",type:"number",placeholder:"Enter Memory"},{label:"SSD (GB)",symbol:"sru",type:"number",placeholder:"Enter SSD size"}],h={label:"Node ID",type:"select",symbol:"nodeId",options:[{label:"Please select a node id.",value:null,selected:!0,disabled:!0}]};let g=null;const $={publicIPs:null,country:null,farmName:null,cru:null,mru:null,sru:null};function b(t,e="Loading..."){const s=m[t].options[0].label;return n(6,m[t].options[0].label=e,m),s}function y(t,e){const[s]=m[t].options;n(6,m[t].options=e.reduce(((t,{name:e,code:n})=>{const s={label:e,value:n||e};return t.push(s),t}),[s]),m)}let v;return t.$$set=t=>{"cpu"in t&&n(11,s=t.cpu),"memory"in t&&n(12,o=t.memory),"ssd"in t&&n(13,i=t.ssd),"publicIp"in t&&n(14,r=t.publicIp),"error"in t&&n(1,l=t.error),"data"in t&&n(0,a=t.data),"profile"in t&&n(15,c=t.profile)},t.$$.update=()=>{if(63489&t.$$.dirty&&(a?(f(`Checking if node ${a} exists`,""),c&&a&&async function(t,e){console.log("profile",t);const{networkEnv:n}=t;return fetch(`https://gridproxy.${n}.grid.tf/nodes/${e}`,{method:"GET"}).then((t=>(console.log(t),t.status>=200&&t.status<400))).catch((t=>(console.log(t),!1)))}(c,a).then((t=>{t?(f(`Node ${a} exists`,""),de(c,s,o,i,r,a).then((t=>f("",t))).catch((t=>f("",t)))):f("",`Node ${a} does not exist`)}))):f("","Please select a node")),30720&t.$$.dirty&&(s&&n(8,$.cru=s,$),o&&n(8,$.mru=Math.round(o/1024),$),i&&n(8,$.sru=i,$),n(8,$.publicIPs=r,$)),98308&t.$$.dirty&&"automatic"===g&&c&&c.networkEnv!==v){n(16,v=c.networkEnv);const t=b(0),e=b(1);(function(t){return ue(t,"\nquery GetLimits {\n    farms: farmsConnection { farms_limit: totalCount }\n    countries: countriesConnection { countries_limit: totalCount }\n}\n").then((({farms:{farms_limit:t},countries:{countries_limit:e}})=>({farms_limit:t,countries_limit:e}))).then((e=>ue(t,"\nquery GetData($farms_limit: Int!, $countries_limit: Int!) {\n    farms(limit: $farms_limit) { name }\n    countries(limit: $countries_limit) { name code }\n}\n",e)))})(c).then((({farms:t,countries:e})=>{y(0,t),y(1,e)})).catch((t=>{console.log("Error",t)})).finally((()=>{b(0,t),b(1,e)}))}},[a,l,g,u,d,p,m,h,$,{label:"Node Selection",type:"select",symbol:"value",options:[{label:"Choose a way to select node",value:null,selected:!0,disabled:!0},{label:"Capacity filter",value:"automatic"},{label:"Manual",value:"manual"}]},function(){n(3,u=!0);const t=h.options[0].label;n(7,h.options[0].label="Loading...",h),re($,c).then((e=>{n(7,h.options[0].label=t,h);const[s]=h.options;e.unshift(s),n(7,h.options=e,h)})).catch((t=>{console.log("Error",t)})).finally((()=>{n(3,u=!1),n(7,h.options[0].label=t,h)}))},s,o,i,r,c,v,function(t){g=t,n(2,g)},function(e,l){t.$$.not_equal($[l.symbol],e)&&($[l.symbol]=e,n(8,$),n(11,s),n(12,o),n(13,i),n(14,r))},function(t){a=t,n(0,a)},function(t){a=t,n(0,a)}]}class ve extends F{constructor(t){super(),tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},ye,be,i,{cpu:11,memory:12,ssd:13,publicIp:14,error:1,data:0,profile:15},null),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),j()))}static get observedAttributes(){return["cpu","memory","ssd","publicIp","error","data","profile"]}get cpu(){return this.$$.ctx[11]}set cpu(t){this.$$set({cpu:t}),j()}get memory(){return this.$$.ctx[12]}set memory(t){this.$$set({memory:t}),j()}get ssd(){return this.$$.ctx[13]}set ssd(t){this.$$set({ssd:t}),j()}get publicIp(){return this.$$.ctx[14]}set publicIp(t){this.$$set({publicIp:t}),j()}get error(){return this.$$.ctx[1]}set error(t){this.$$set({error:t}),j()}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),j()}get profile(){return this.$$.ctx[15]}set profile(t){this.$$set({profile:t}),j()}}function we(t){let e;return{c(){e=u("Deploy")},m(t,n){l(t,e,n)},d(t){t&&a(e)}}}function xe(t){let e;return{c(){e=u("Back")},m(t,n){l(t,e,n)},d(t){t&&a(e)}}}function ke(e){let n,s,o,i,u;function d(t,e){return t[1]||t[2]?xe:we}let p=d(e),m=p(e);return{c(){n=c("div"),s=c("button"),m.c(),this.c=t,h(s,"class",o="button is-primary "+(e[0]?"is-loading":"")),h(s,"type","submit"),s.disabled=e[3],h(n,"class","is-flex is-justify-content-flex-end is-align-items-center")},m(t,o){l(t,n,o),r(n,s),m.m(s,null),i||(u=f(s,"click",e[4]),i=!0)},p(t,[e]){p!==(p=d(t))&&(m.d(1),m=p(t),m&&(m.c(),m.m(s,null))),1&e&&o!==(o="button is-primary "+(t[0]?"is-loading":""))&&h(s,"class",o),8&e&&(s.disabled=t[3])},i:t,o:t,d(t){t&&a(n),m.d(),i=!1,u()}}}function _e(t,e,n){let{loading:s}=e,{success:o}=e,{failed:i}=e,{disabled:r}=e;return t.$$set=t=>{"loading"in t&&n(0,s=t.loading),"success"in t&&n(1,o=t.success),"failed"in t&&n(2,i=t.failed),"disabled"in t&&n(3,r=t.disabled)},[s,o,i,r,function(e){E.call(this,t,e)}]}customElements.define("tf-select-node-id",ve);class Ie extends F{constructor(t){super(),tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},_e,ke,i,{loading:0,success:1,failed:2,disabled:3},null),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),j()))}static get observedAttributes(){return["loading","success","failed","disabled"]}get loading(){return this.$$.ctx[0]}set loading(t){this.$$set({loading:t}),j()}get success(){return this.$$.ctx[1]}set success(t){this.$$set({success:t}),j()}get failed(){return this.$$.ctx[2]}set failed(t){this.$$set({failed:t}),j()}get disabled(){return this.$$.ctx[3]}set disabled(t){this.$$set({disabled:t}),j()}}function Ee(e){let n,s,o;return{c(){n=c("div"),s=u(e[1]),this.c=t,h(n,"class",o="notification is-"+e[0])},m(t,e){l(t,n,e),r(n,s)},p(t,[e]){2&e&&$(s,t[1]),1&e&&o!==(o="notification is-"+t[0])&&h(n,"class",o)},i:t,o:t,d(t){t&&a(n)}}}function Ne(t,e,n){let{type:s}=e,{message:o}=e;return t.$$set=t=>{"type"in t&&n(0,s=t.type),"message"in t&&n(1,o=t.message)},[s,o]}customElements.define("tf-deploy-btn",Ie);class Pe extends F{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Ne,Ee,i,{type:0,message:1},null),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),j()))}static get observedAttributes(){return["type","message"]}get type(){return this.$$.ctx[0]}set type(t){this.$$set({type:t}),j()}get message(){return this.$$.ctx[1]}set message(t){this.$$set({message:t}),j()}}function Ce(e){let n,s,o,i,p,f,m,g,b,v,w,x,k,_,I,E,N;return{c(){n=c("div"),s=u(e[1]),o=d(),i=c("hr"),p=d(),f=c("h3"),f.textContent="Deployment Info:",m=d(),g=c("ul"),b=c("li"),v=u("Domain: https://"),w=u(e[2]),x=u("/"),k=d(),_=c("li"),I=u("Planetary IP: "),E=u(e[3]),this.c=t,y(f,"font-weight","bold"),h(g,"class","ml-2"),h(n,"class",N="notification is-"+e[0])},m(t,e){l(t,n,e),r(n,s),r(n,o),r(n,i),r(n,p),r(n,f),r(n,m),r(n,g),r(g,b),r(b,v),r(b,w),r(b,x),r(g,k),r(g,_),r(_,I),r(_,E)},p(t,[e]){2&e&&$(s,t[1]),4&e&&$(w,t[2]),8&e&&$(E,t[3]),1&e&&N!==(N="notification is-"+t[0])&&h(n,"class",N)},i:t,o:t,d(t){t&&a(n)}}}function Se(t,e,n){let{type:s}=e,{message:o}=e,{gateway:i}=e,{planetaryIP:r}=e;return t.$$set=t=>{"type"in t&&n(0,s=t.type),"message"in t&&n(1,o=t.message),"gateway"in t&&n(2,i=t.gateway),"planetaryIP"in t&&n(3,r=t.planetaryIP)},[s,o,i,r]}customElements.define("tf-alert",Pe);class Me extends F{constructor(t){super(),tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Se,Ce,i,{type:0,message:1,gateway:2,planetaryIP:3},null),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),j()))}static get observedAttributes(){return["type","message","gateway","planetaryIP"]}get type(){return this.$$.ctx[0]}set type(t){this.$$set({type:t}),j()}get message(){return this.$$.ctx[1]}set message(t){this.$$set({message:t}),j()}get gateway(){return this.$$.ctx[2]}set gateway(t){this.$$set({gateway:t}),j()}get planetaryIP(){return this.$$.ctx[3]}set planetaryIP(t){this.$$set({planetaryIP:t}),j()}}function Ae(t){let e,n,s,o,i,r,c;function u(e){t[13](e)}e=new Mt({}),e.$on("profile",t[12]);let f={tabs:t[9]};void 0!==t[5]&&(f.active=t[5]),s=new ee({props:f}),P.push((()=>J(s,"active",u)));let m="base"===t[5]&&Te(t);return{c(){K(e.$$.fragment),n=d(),K(s.$$.fragment),i=d(),m&&m.c(),r=p()},m(t,o){X(e,t,o),l(t,n,o),X(s,t,o),l(t,i,o),m&&m.m(t,o),l(t,r,o),c=!0},p(t,e){const n={};!o&&32&e&&(o=!0,n.active=t[5],R((()=>o=!1))),s.$set(n),"base"===t[5]?m?(m.p(t,e),32&e&&H(m,1)):(m=Te(t),m.c(),H(m,1),m.m(r.parentNode,r)):m&&(V(),B(m,1,1,(()=>{m=null})),q())},i(t){c||(H(e.$$.fragment,t),H(s.$$.fragment,t),H(m),c=!0)},o(t){B(e.$$.fragment,t),B(s.$$.fragment,t),B(m),c=!1},d(t){Q(e,t),t&&a(n),Q(s,t),t&&a(i),m&&m.d(t),t&&a(r)}}}function De(t){let e,n;return e=new Pe({props:{type:"danger",message:t[7]||"Failed to deploy VM."}}),{c(){K(e.$$.fragment)},m(t,s){X(e,t,s),n=!0},p(t,n){const s={};128&n&&(s.message=t[7]||"Failed to deploy VM."),e.$set(s)},i(t){n||(H(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Re(e){let n,s;return n=new Me({props:{type:"success",message:"Successfully Deployed A Funkwhale Instance",planetaryIP:Nt,gateway:Et}}),{c(){K(n.$$.fragment)},m(t,e){X(n,t,e),s=!0},p:t,i(t){s||(H(n.$$.fragment,t),s=!0)},o(t){B(n.$$.fragment,t),s=!1},d(t){Q(n,t)}}}function Oe(t){let e,n;return e=new Pe({props:{type:"info",message:t[7]||"Loading..."}}),{c(){K(e.$$.fragment)},m(t,s){X(e,t,s),n=!0},p(t,n){const s={};128&n&&(s.message=t[7]||"Loading..."),e.$set(s)},i(t){n||(H(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Te(t){let e,n,s,o,i,r;function c(e){t[14](e)}let u={field:t[6]};function p(e){t[15](e)}void 0!==t[0].name&&(u.data=t[0].name),e=new Wt({props:u}),P.push((()=>J(e,"data",c))),e.$on("input",t[11]);let f={publicIp:!1,cpu:t[0].cpu,memory:t[0].memory,ssd:t[0].disks.reduce(ze,t[0].rootFsSize),profile:t[1]};return void 0!==t[0].nodeId&&(f.data=t[0].nodeId),o=new ve({props:f}),P.push((()=>J(o,"data",p))),{c(){K(e.$$.fragment),s=d(),K(o.$$.fragment)},m(t,n){X(e,t,n),l(t,s,n),X(o,t,n),r=!0},p(t,s){const r={};64&s&&(r.field=t[6]),!n&&1&s&&(n=!0,r.data=t[0].name,R((()=>n=!1))),e.$set(r);const l={};1&s&&(l.cpu=t[0].cpu),1&s&&(l.memory=t[0].memory),1&s&&(l.ssd=t[0].disks.reduce(ze,t[0].rootFsSize)),2&s&&(l.profile=t[1]),!i&&1&s&&(i=!0,l.data=t[0].nodeId,R((()=>i=!1))),o.$set(l)},i(t){r||(H(e.$$.fragment,t),H(o.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),B(o.$$.fragment,t),r=!1},d(t){Q(e,t),t&&a(s),Q(o,t)}}}function je(e){let n,s,o,i,u,p,g,$,b,v,w,x,k;const _=[Oe,Re,De,Ae],I=[];function E(t,e){return t[2]?0:t[3]?1:t[4]?2:3}return g=E(e),$=I[g]=_[g](e),v=new Ie({props:{disabled:e[8],loading:e[2],failed:e[4],success:e[3]}}),v.$on("click",e[16]),{c(){n=c("div"),s=c("form"),o=c("h4"),o.textContent="Deploy a Funkwhale Instance",i=d(),u=c("hr"),p=d(),$.c(),b=d(),K(v.$$.fragment),this.c=t,h(o,"class","is-size-4"),h(s,"class","box"),y(n,"padding","15px")},m(t,a){l(t,n,a),r(n,s),r(s,o),r(s,i),r(s,u),r(s,p),I[g].m(s,null),r(s,b),X(v,s,null),w=!0,x||(k=f(s,"submit",m(e[10])),x=!0)},p(t,[e]){let n=g;g=E(t),g===n?I[g].p(t,e):(V(),B(I[n],1,1,(()=>{I[n]=null})),q(),$=I[g],$?$.p(t,e):($=I[g]=_[g](t),$.c()),H($,1),$.m(s,b));const o={};256&e&&(o.disabled=t[8]),4&e&&(o.loading=t[2]),16&e&&(o.failed=t[4]),8&e&&(o.success=t[3]),v.$set(o)},i(t){w||(H($),H(v.$$.fragment,t),w=!0)},o(t){B($),B(v.$$.fragment,t),w=!1},d(t){t&&a(n),I[g].d(),Q(v),x=!1,k()}}}customElements.define("tf-alert",Me);const ze=(t,e)=>t+e.size;function Le(t,e,n){let s;var o,i,r;const{events:l}=null!==(i=null===(o=window.configs)||void 0===o?void 0:o.grid3_client)&&void 0!==i?i:{},a=null===(r=window.configs)||void 0===r?void 0:r.deploymentStore,c=new gt;let u,d="base",p=!1,f=!1,m=!1;const h={label:"Name",placeholder:"Virtual Machine Name",symbol:"name",type:"text"};let g;return t.$$.update=()=>{31&t.$$.dirty&&n(8,s=(p||!c.valid)&&!(f||m)||!u||!c.name.match(/^[a-z][a-z0-9]*$/i))},[c,u,p,f,m,d,h,g,s,[{label:"Base",value:"base"}],async function(){n(2,p=!0),n(3,f=!1),n(4,m=!1),n(7,g=void 0);const{cpu:t,memory:e,publicIp:s,disks:o,rootFsSize:i,nodeId:r}=c,d=o.reduce(((t,e)=>t+e.size),i);function h(t){"string"==typeof t&&n(7,g=t)}if(!function(t,e=2){const{balance:n}=t;return n&&n>=e}(u))return n(4,m=!0),n(2,p=!1),void n(7,g="No enough balance to execute transaction requires 2 TFT at least in your wallet.");const $=await de(u,t,e,d,s,r);if($)return n(7,g=$),n(4,m=!0),void n(2,p=!1);l.addListener("logs",h),Pt(c,u).then((()=>{a.set(0),n(3,f=!0),console.log(Et),console.log(Nt)})).catch((t=>{n(4,m=!0),n(7,g="string"==typeof t?t:t.message)})).finally((()=>{n(2,p=!1),l.removeListener("logs",h)}))},function(t){const e=t.target;n(6,h.error=e.value.match(/^[a-z][a-z0-9]*$/i)?null:"Only alphanumeric names are allowed",h)},({detail:t})=>{n(1,u=t),n(0,c.envs[0]=new ht(void 0,"SSH_KEY",t.sshKey),c)},function(t){d=t,n(5,d)},function(e){t.$$.not_equal(c.name,e)&&(c.name=e,n(0,c))},function(e){t.$$.not_equal(c.nodeId,e)&&(c.nodeId=e,n(0,c))},t=>{(f||m)&&(t.preventDefault(),n(3,f=!1),n(4,m=!1),n(2,p=!1))}]}customElements.define("tf-funkwhale",class extends F{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Le,je,i,{},null),t&&t.target&&l(t.target,this,t.anchor)}})}();
