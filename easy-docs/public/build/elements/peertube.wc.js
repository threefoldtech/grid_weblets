!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function d(){return u(" ")}function p(){return u("")}function f(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function m(t){return function(e){return e.preventDefault(),t.call(this,e)}}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t){return""===t?null:+t}function g(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}function y(t,e,n,s){t.style.setProperty(e,n,s?"important":"")}function v(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}t.selectedIndex=-1}function w(t){const e={};for(const n of t)e[n.name]=n.value;return e}let _;function x(t){_=t}function E(){if(!_)throw new Error("Function called outside component initialization");return _}function k(){const t=E();return(e,n)=>{const s=t.$$.callbacks[e];if(s){const o=function(t,e,n=!1){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,!1,e),s}(e,n);s.slice().forEach((e=>{e.call(t,o)}))}}}function S(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const P=[],N=[],M=[],A=[],I=Promise.resolve();let R=!1;function D(t){M.push(t)}function C(t){A.push(t)}let T=!1;const O=new Set;function V(){if(!T){T=!0;do{for(let t=0;t<P.length;t+=1){const e=P[t];x(e),B(e.$$)}for(x(null),P.length=0;N.length;)N.pop()();for(let t=0;t<M.length;t+=1){const e=M[t];O.has(e)||(O.add(e),e())}M.length=0}while(P.length);for(;A.length;)A.pop()();R=!1,T=!1,O.clear()}}function B(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(D)}}const U=new Set;let j,z;function L(){j={r:0,c:[],p:j}}function F(){j.r||s(j.c),j=j.p}function H(t,e){t&&t.i&&(U.delete(t),t.i(e))}function q(t,e,n,s){if(t&&t.o){if(U.has(t))return;U.add(t),j.c.push((()=>{U.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}function G(t,e){t.d(1),e.delete(t.key)}function W(t,e){q(t,1,1,(()=>{e.delete(t.key)}))}function Y(t,e,n,s,o,i,r,l,a,c,u,d){let p=t.length,f=i.length,m=p;const h={};for(;m--;)h[t[m].key]=m;const b=[],g=new Map,$=new Map;for(m=f;m--;){const t=d(o,i,m),l=n(t);let a=r.get(l);a?s&&a.p(t,e):(a=c(l,t),a.c()),g.set(l,b[m]=a),l in h&&$.set(l,Math.abs(m-h[l]))}const y=new Set,v=new Set;function w(t){H(t,1),t.m(l,u),r.set(t.key,t),u=t.first,f--}for(;p&&f;){const e=b[f-1],n=t[p-1],s=e.key,o=n.key;e===n?(u=e.first,p--,f--):g.has(o)?!r.has(s)||y.has(s)?w(e):v.has(o)?p--:$.get(s)>$.get(o)?(v.add(s),w(e)):(y.add(o),p--):(a(n,r),p--)}for(;p--;){const e=t[p];g.has(e.key)||a(e,r)}for(;f;)w(b[f-1]);return b}function J(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function X(t){t&&t.c()}function K(t,n,i,r){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=t.$$;l&&l.m(n,i),r||D((()=>{const n=a.map(e).filter(o);c?c.push(...n):s(n),t.$$.on_mount=[]})),u.forEach(D)}function Q(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(t,e){-1===t.$$.dirty[0]&&(P.push(t),R||(R=!0,I.then(V)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function tt(e,o,i,r,l,c,u,d=[-1]){const p=_;x(e);const f=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(p?p.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:o.target||p.$$.root};u&&u(f.root);let m=!1;if(f.ctx=i?i(e,o.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return f.ctx&&l(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),m&&Z(e,t)),n})):[],f.update(),m=!0,s(f.before_update),f.fragment=!!r&&r(f.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);f.fragment&&f.fragment.l(t),t.forEach(a)}else f.fragment&&f.fragment.c();o.intro&&H(e.$$.fragment),K(e,o.target,o.anchor,o.customElement),V()}x(p)}var et;"function"==typeof HTMLElement&&(z=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(o);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){s(this.$$.on_disconnect)}$destroy(){Q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var nt=new Uint8Array(16);function st(){if(!et&&!(et="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return et(nt)}var ot=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function it(t){return"string"==typeof t&&ot.test(t)}for(var rt,lt,at,ct,ut=[],dt=0;dt<256;++dt)ut.push((dt+256).toString(16).substr(1));function pt(t,e,n){var s=(t=t||{}).random||(t.rng||st)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=s[o];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(ut[t[e+0]]+ut[t[e+1]]+ut[t[e+2]]+ut[t[e+3]]+"-"+ut[t[e+4]]+ut[t[e+5]]+"-"+ut[t[e+6]]+ut[t[e+7]]+"-"+ut[t[e+8]]+ut[t[e+9]]+"-"+ut[t[e+10]]+ut[t[e+11]]+ut[t[e+12]]+ut[t[e+13]]+ut[t[e+14]]+ut[t[e+15]]).toLowerCase();if(!it(n))throw TypeError("Stringified UUID is invalid");return n}(s)}function ft(t){const e=+t;return"number"==typeof e&&!isNaN(e)&&e>=0&&e.toFixed(0)===e.toString()}class mt{constructor(t="NW"+pt().split("-")[0],e="10.20.0.0/16"){this.name=t,this.ipRange=e}get valid(){const{name:t,ipRange:e}=this;return""!==t&&""!==e}}class ht{constructor(t=pt(),e="SSH_KEY",n="ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDTwULSsUubOq3VPWL6cdrDvexDmjfznGydFPyaNcn7gAL9lRxwFbCDPMj7MbhNSpxxHV2+/iJPQOTVJu4oc1N7bPP3gBCnF51rPrhTpGCt5pBbTzeyNweanhedkKDsCO2mIEh/92Od5Hg512dX4j7Zw6ipRWYSaepapfyoRnNSriW/s3DH/uewezVtL5EuypMdfNngV/u2KZYWoeiwhrY/yEUykQVUwDysW/xUJNP5o+KSTAvNSJatr3FbuCFuCjBSvageOLHePTeUwu6qjqe+Xs4piF1ByO/6cOJ8bt5Vcx0bAtI8/MPApplUU/JWevsPNApvnA/ntffI+u8DCwgP"){this.id=t,this.key=e,this.value=n}get valid(){const{key:t,value:e}=this;return""!==t&&""!==e}}class bt{constructor(t=pt(),e="VM"+t.split("-")[0],n="https://hub.grid.tf/tf-official-apps/base:latest.flist",s=4,o=8192,i="/sbin/zinit init",r=!0,l,a=25,c=new mt,u=[],d=[],p=!1){this.id=t,this.name=e,this.flist=n,this.cpu=s,this.memory=o,this.entrypoint=i,this.planetary=r,this.nodeId=l,this.rootFsSize=a,this.network=c,this.envs=u,this.disks=d,this.publicIp=p}get valid(){const{name:t,flist:e,cpu:n,memory:s,entrypoint:o,nodeId:i}=this,{rootFsSize:r,network:l,envs:a,disks:c}=this;return""!==t&&""!==e&&""!==o&&ft(n)&&ft(s)&&ft(i)&&ft(r)&&l.valid&&a.reduce(((t,e)=>t&&e.valid),!0)&&c.reduce(((t,e)=>t&&e.valid),!0)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */async function gt(t,e){return 0==(await t.gateway.getObj(e)).length?e:e+Math.floor(1e3*Math.random())}const{HTTPMessageBusClient:$t}=null!==(lt=null===(rt=window.configs)||void 0===rt?void 0:rt.client)&&void 0!==lt?lt:{},{GridClient:yt,NetworkModel:vt,DiskModel:wt,MachineModel:_t,MachinesModel:xt,GatewayNameModel:Et,Nodes:kt}=null!==(ct=null===(at=window.configs)||void 0===at?void 0:at.grid3_client)&&void 0!==ct?ct:{};async function St(t,e){const n=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]])}return n}(t,["envs","disks"]);let{name:s,flist:o,cpu:i,memory:r,entrypoint:l,network:a}=n;const{publicIp:c,planetary:u,nodeId:d,rootFsSize:p}=n,{mnemonics:f,storeSecret:m,networkEnv:h}=e,b=new $t(0,""),g=new yt(h,f,m,b,void 0,"tfkvstore");await g.connect(),s=await gt(g,s),console.log(s);const $=new kt(yt.config.graphqlURL,yt.config.rmbClient.proxyURL),y=await async function(t,e){const n=await async function(t){return await t.getAccessNodes()}(t);return n[e].domain}($,8),v=new vt;v.name=s+"NW",v.ip_range="10.1.0.0/16",await async function(t,e,n,s){const o=new wt;o.name=s+"Disk",o.size=10,o.mountpoint="/data";const i=new _t;i.name=s+"RVM",i.node_id=n,i.disks=[o],i.public_ip=!1,i.planetary=!0,i.cpu=1,i.memory=256,i.rootfs_size=1,i.flist="https://hub.grid.tf/omar0.3bot/omarelawady-redis-grid3.flist",i.entrypoint="/start.sh",i.env={PASSWORD:"omar123456"};const r=new xt;return r.name=s+"RVMs",r.network=e,r.machines=[i],t.machines.deploy(r)}(g,v,d,s);const w=await async function(t,e){return await t.machines.getObj(e)}(g,s+"RVMs"),_=w[0].interfaces[0].ip;await async function(t,e,n,s){const o=new wt;o.name=s+"Disk",o.size=10,o.mountpoint="/var/lib/postgresql/data";const i=new _t;i.name=s+"PGVM",i.node_id=n,i.disks=[o],i.public_ip=!1,i.planetary=!0,i.cpu=1,i.memory=256,i.rootfs_size=1,i.flist="https://hub.grid.tf/omar0.3bot/omarelawady-postgres-grid3.flist",i.entrypoint="/start.sh",i.env={POSTGRES_PASSWORD:"omar123456",POSTGRES_DB:"peertube_prod",PGDATA:"/var/lib/postgresql/data"};const r=new xt;return r.name=s+"PGVMs",r.network=e,r.machines=[i],t.machines.deploy(r)}(g,v,d,s);const x=await async function(t,e){return await t.machines.getObj(e)}(g,s+"PGVMs"),E=x[0].interfaces[0].ip;await async function(t,e,n,s,o,i,r){const l=new wt;l.name=i+"Disk",l.size=10,l.mountpoint="/data";const a=new _t;a.name=i+"PTVM",a.node_id=o,a.disks=[l],a.public_ip=!1,a.planetary=!0,a.cpu=3,a.memory=2048,a.rootfs_size=1,a.flist="https://hub.grid.tf/omar0.3bot/omarelawady-peertube-grid3-tfconnect.flist",a.entrypoint="/start.sh",a.env={PEERTUBE_BIND_ADDRESS:"::",PEERTUBE_WEBSERVER_HOSTNAME:i+r,PEERTUBE_DB_HOSTNAME:s,PEERTUBE_DB_USERNAME:"postgres",PEERTUBE_DB_PASSWORD:"omar123456",PEERTUBE_REDIS_HOSTNAME:n,PEERTUBE_REDIS_AUTH:"omar123456"};const c=new xt;return c.name=i+"PTVMs",c.network=e,c.machines=[a],t.machines.deploy(c)}(g,v,_,E,d,s,y);const k=await async function(t,e){return await t.machines.getObj(e)}(g,s+"PTVMs"),S=k[0].yggIP;await async function(t,e,n,s){const o=new Et;return o.name=e,o.node_id=s,o.tls_passthrough=!1,o.backends=[`http://[${n}]:3000/`],t.gateway.deploy_name(o)}(g,s,S,8);const P=await async function(t,e){return await t.gateway.getObj(e)}(g,s),N=P[0].domain;console.log(N)}function Pt(e){return{c(){this.c=t},m:t,p:t,i:t,o:t,d:t}}function Nt(t){var e;const n=null===(e=window.configs)||void 0===e?void 0:e.baseConfig,s=k();let o;var i;return i=()=>{o=n.subscribe((()=>{s("profile",n.getActiveProfile())}))},E().$$.on_mount.push(i),function(t){E().$$.on_destroy.push(t)}((()=>{o()})),[]}class Mt extends z{constructor(t){super(),tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Nt,Pt,i,{},null),t&&t.target&&l(t.target,this,t.anchor)}}function At(t,e,n){const s=t.slice();return s[19]=e[n],s}function It(t){let e,n,s;function o(t,e){return null==n&&(n=!!t[3]()),n?Ct:"checkbox"===t[1].type?Dt:"select"===t[1].type?Rt:void 0}let i=o(t),u=i&&i(t),p=t[1].tooltip&&Ft(t);return{c(){e=c("div"),u&&u.c(),s=d(),p&&p.c(),h(e,"class","tooltip mb-2")},m(t,n){l(t,e,n),u&&u.m(e,null),r(e,s),p&&p.m(e,null)},p(t,n){i===(i=o(t))&&u?u.p(t,n):(u&&u.d(1),u=i&&i(t),u&&(u.c(),u.m(e,s))),t[1].tooltip?p?p.p(t,n):(p=Ft(t),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},d(t){t&&a(e),u&&u.d(),p&&p.d()}}}function Rt(t){let e,n,o,i,u,p,m,b,g=[],$=new Map,w=t[1].label&&Tt(t),_=t[1].options;const x=t=>t[19].value;for(let e=0;e<_.length;e+=1){let n=At(t,_,e),s=x(n);$.set(s,g[e]=Ot(s,n))}let E=t[1].error&&Vt(t);return{c(){w&&w.c(),e=d(),n=c("div"),o=c("select");for(let t=0;t<g.length;t+=1)g[t].c();u=d(),E&&E.c(),o.disabled=i=t[1].disabled,y(o,"width","100%"),void 0===t[0]&&D((()=>t[17].call(o))),h(n,"class",p="select mb-2"+(t[1].error?" is-danger":"")),y(n,"width","100%"),h(n,"id",t[2])},m(s,i){w&&w.m(s,i),l(s,e,i),l(s,n,i),r(n,o);for(let t=0;t<g.length;t+=1)g[t].m(o,null);v(o,t[0]),r(n,u),E&&E.m(n,null),m||(b=[f(o,"change",t[17]),f(o,"change",t[4])],m=!0)},p(t,s){t[1].label?w?w.p(t,s):(w=Tt(t),w.c(),w.m(e.parentNode,e)):w&&(w.d(1),w=null),2&s&&(_=t[1].options,g=Y(g,s,x,1,t,_,$,o,G,Ot,null,At)),2&s&&i!==(i=t[1].disabled)&&(o.disabled=i),3&s&&v(o,t[0]),t[1].error?E?E.p(t,s):(E=Vt(t),E.c(),E.m(n,null)):E&&(E.d(1),E=null),2&s&&p!==(p="select mb-2"+(t[1].error?" is-danger":""))&&h(n,"class",p)},d(t){w&&w.d(t),t&&a(e),t&&a(n);for(let t=0;t<g.length;t+=1)g[t].d();E&&E.d(),m=!1,s(b)}}}function Dt(t){let e,n,o,i,p,m,b,$,v,w,_,x=t[1].label+"";return{c(){e=c("div"),n=c("label"),o=c("input"),p=d(),m=c("span"),b=d(),$=c("label"),v=u(x),h(o,"class","switch__input"),h(o,"type","checkbox"),h(o,"id",t[2]),o.disabled=i=t[1].disabled,h(m,"class","slider"),h(n,"class","switch"),h($,"for",t[2]),h($,"class","label ml-2"),y($,"cursor","pointer"),y(e,"display","flex"),y(e,"align-items","center"),h(e,"class","mb-2")},m(s,i){l(s,e,i),r(e,n),r(n,o),o.checked=t[0],r(n,p),r(n,m),r(e,b),r(e,$),r($,v),w||(_=[f(o,"change",t[16]),f(o,"input",t[11])],w=!0)},p(t,e){2&e&&i!==(i=t[1].disabled)&&(o.disabled=i),3&e&&(o.checked=t[0]),2&e&&x!==(x=t[1].label+"")&&g(v,x)},d(t){t&&a(e),w=!1,s(_)}}}function Ct(t){let e,n,s,o,i,p,f=t[1].label+"";function m(t,e){return"textarea"===t[1].type?zt:"text"===t[1].type?jt:"number"===t[1].type?Ut:"password"===t[1].type?Bt:void 0}let b=m(t),$=b&&b(t),y=t[1].error&&Lt(t);return{c(){e=c("div"),n=c("p"),s=u(f),o=d(),i=c("div"),$&&$.c(),p=d(),y&&y.c(),h(n,"class","label"),h(i,"class","control"),h(e,"class","field"),h(e,"id",t[2])},m(t,a){l(t,e,a),r(e,n),r(n,s),r(e,o),r(e,i),$&&$.m(i,null),r(e,p),y&&y.m(e,null)},p(t,n){2&n&&f!==(f=t[1].label+"")&&g(s,f),b===(b=m(t))&&$?$.p(t,n):($&&$.d(1),$=b&&b(t),$&&($.c(),$.m(i,null))),t[1].error?y?y.p(t,n):(y=Lt(t),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},d(t){t&&a(e),$&&$.d(),y&&y.d()}}}function Tt(t){let e,n,s=t[1].label+"";return{c(){e=c("p"),n=u(s),h(e,"class","label")},m(t,s){l(t,e,s),r(e,n)},p(t,e){2&e&&s!==(s=t[1].label+"")&&g(n,s)},d(t){t&&a(e)}}}function Ot(t,e){let n,s,o,i,p,f,m=e[19].label+"";return{key:t,first:null,c(){n=c("option"),s=u(m),o=d(),n.__value=i=e[19].value,n.value=n.__value,n.selected=p=e[19].selected,n.disabled=f=e[19].disabled,this.first=n},m(t,e){l(t,n,e),r(n,s),r(n,o)},p(t,o){e=t,2&o&&m!==(m=e[19].label+"")&&g(s,m),2&o&&i!==(i=e[19].value)&&(n.__value=i,n.value=n.__value),2&o&&p!==(p=e[19].selected)&&(n.selected=p),2&o&&f!==(f=e[19].disabled)&&(n.disabled=f)},d(t){t&&a(n)}}}function Vt(t){let e,n,s=t[1].error+"";return{c(){e=c("p"),n=u(s),h(e,"class","help is-danger")},m(t,s){l(t,e,s),r(e,n)},p(t,e){2&e&&s!==(s=t[1].error+"")&&g(n,s)},d(t){t&&a(e)}}}function Bt(t){let e,n,o,i,r,u;return{c(){e=c("input"),h(e,"type","password"),h(e,"class",n="input"+(t[1].error?" is-danger":"")),h(e,"placeholder",o=t[1].placeholder),e.disabled=i=t[1].disabled},m(n,s){l(n,e,s),$(e,t[0]),r||(u=[f(e,"input",t[15]),f(e,"input",t[10])],r=!0)},p(t,s){2&s&&n!==(n="input"+(t[1].error?" is-danger":""))&&h(e,"class",n),2&s&&o!==(o=t[1].placeholder)&&h(e,"placeholder",o),2&s&&i!==(i=t[1].disabled)&&(e.disabled=i),3&s&&e.value!==t[0]&&$(e,t[0])},d(t){t&&a(e),r=!1,s(u)}}}function Ut(t){let e,n,o,i,r,u;return{c(){e=c("input"),h(e,"type","number"),h(e,"class",n="input"+(t[1].error?" is-danger":"")),h(e,"placeholder",o=t[1].placeholder),e.disabled=i=t[1].disabled},m(n,s){l(n,e,s),$(e,t[0]),r||(u=[f(e,"input",t[14]),f(e,"input",t[9])],r=!0)},p(t,s){2&s&&n!==(n="input"+(t[1].error?" is-danger":""))&&h(e,"class",n),2&s&&o!==(o=t[1].placeholder)&&h(e,"placeholder",o),2&s&&i!==(i=t[1].disabled)&&(e.disabled=i),3&s&&b(e.value)!==t[0]&&$(e,t[0])},d(t){t&&a(e),r=!1,s(u)}}}function jt(t){let e,n,o,i,r,u;return{c(){e=c("input"),h(e,"type","text"),h(e,"class",n="input"+(t[1].error?" is-danger":"")),h(e,"placeholder",o=t[1].placeholder),e.disabled=i=t[1].disabled},m(n,s){l(n,e,s),$(e,t[0]),r||(u=[f(e,"input",t[13]),f(e,"input",t[8])],r=!0)},p(t,s){2&s&&n!==(n="input"+(t[1].error?" is-danger":""))&&h(e,"class",n),2&s&&o!==(o=t[1].placeholder)&&h(e,"placeholder",o),2&s&&i!==(i=t[1].disabled)&&(e.disabled=i),3&s&&e.value!==t[0]&&$(e,t[0])},d(t){t&&a(e),r=!1,s(u)}}}function zt(t){let e,n,o,i,r,u;return{c(){e=c("textarea"),h(e,"class",n="textarea"+(t[1].error?" is-danger":"")),h(e,"placeholder",o=t[1].placeholder),e.disabled=i=t[1].disabled},m(n,s){l(n,e,s),$(e,t[0]),r||(u=[f(e,"input",t[12]),f(e,"input",t[7])],r=!0)},p(t,s){2&s&&n!==(n="textarea"+(t[1].error?" is-danger":""))&&h(e,"class",n),2&s&&o!==(o=t[1].placeholder)&&h(e,"placeholder",o),2&s&&i!==(i=t[1].disabled)&&(e.disabled=i),3&s&&$(e,t[0])},d(t){t&&a(e),r=!1,s(u)}}}function Lt(t){let e,n,s=t[1].error+"";return{c(){e=c("p"),n=u(s),h(e,"class","help is-danger")},m(t,s){l(t,e,s),r(e,n)},p(t,e){2&e&&s!==(s=t[1].error+"")&&g(n,s)},d(t){t&&a(e)}}}function Ft(t){let e,n,s=t[1].tooltip+"";return{c(){e=c("span"),n=u(s),h(e,"class","tooltip__text")},m(t,s){l(t,e,s),r(e,n)},p(t,e){2&e&&s!==(s=t[1].tooltip+"")&&g(n,s)},d(t){t&&a(e)}}}function Ht(e){let n,s,o,i=e[1]&&It(e);return{c(){n=c("div"),s=d(),i&&i.c(),o=p(),this.c=t},m(t,r){l(t,n,r),n.innerHTML=e[5],l(t,s,r),i&&i.m(t,r),l(t,o,r)},p(t,[e]){t[1]?i?i.p(t,e):(i=It(t),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},i:t,o:t,d(t){t&&a(n),t&&a(s),i&&i.d(t),t&&a(o)}}}function qt(t,e,n){const s=k();let{field:o}=e,{data:i}=e,{selected:r=0}=e;const l=pt();return t.$$set=t=>{"field"in t&&n(1,o=t.field),"data"in t&&n(0,i=t.data),"selected"in t&&n(6,r=t.selected)},[i,o,l,()=>["text","number","password","textarea"].includes(o.type),function(t){s("input");const e=t.target;n(6,r=e.selectedIndex)},'\n<style>\n  .switch {\n    position: relative;\n    display: inline-block;\n    width: 60px;\n    height: 34px;\n  }\n\n  .switch .switch__input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n\n  .slider {\n    position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #ccc;\n    -webkit-transition: 0.4s;\n    transition: 0.4s;\n    border-radius: 34px;\n  }\n\n  .slider:before {\n    position: absolute;\n    content: "";\n    height: 26px;\n    width: 26px;\n    left: 4px;\n    bottom: 4px;\n    background-color: white;\n    -webkit-transition: 0.4s;\n    transition: 0.4s;\n    border-radius: 50%;\n  }\n\n  .switch__input:checked + .slider {\n    background-color: #2196f3;\n  }\n\n  .switch__input:checked + .slider {\n    box-shadow: 0 0 1px #2196f3;\n  }\n\n  .switch__input:checked + .slider:before {\n    -webkit-transform: translateX(26px);\n    -ms-transform: translateX(26px);\n    transform: translateX(26px);\n  }\n\n  .tooltip {\n    position: relative;\n  }\n\n  .tooltip__text {\n    position: absolute;\n    top: -20px;\n    left: 50%;\n    padding: 10px 15px;\n    border-radius: 5px;\n    background-color: rgba(51, 51, 51, 0.9);\n    color: white;\n    z-index: 9;\n    max-width: min(1000px, calc(100% - 30px));\n    display: block;\n\n    transition-property: opacity, transform, visibility;\n    transition-timing-function: ease;\n    transition-duration: 300ms;\n    pointer-events: none;\n    opacity: 0;\n    visibility: hidden;\n    transform: translateX(-50%) translateY(20px) scale(0);\n  }\n\n  .tooltip:hover > .tooltip__text {\n    pointer-events: all;\n    opacity: 1;\n    visibility: visible;\n    transform: translateX(-50%) translateY(0) scale(1);\n  }\n</style>\n',r,function(e){S.call(this,t,e)},function(e){S.call(this,t,e)},function(e){S.call(this,t,e)},function(e){S.call(this,t,e)},function(e){S.call(this,t,e)},function(){i=this.value,n(0,i),n(1,o)},function(){i=this.value,n(0,i),n(1,o)},function(){i=b(this.value),n(0,i),n(1,o)},function(){i=this.value,n(0,i),n(1,o)},function(){i=this.checked,n(0,i),n(1,o)},function(){i=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(0,i),n(1,o)}]}customElements.define("tf-select-profile",Mt);class Gt extends z{constructor(t){super(),tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},qt,Ht,i,{field:1,data:0,selected:6},null),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),V()))}static get observedAttributes(){return["field","data","selected"]}get field(){return this.$$.ctx[1]}set field(t){this.$$set({field:t}),V()}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),V()}get selected(){return this.$$.ctx[6]}set selected(t){this.$$set({selected:t}),V()}}function Wt(t,e,n){const s=t.slice();return s[6]=e[n],s[8]=n,s}function Yt(t){let e,n=[],s=new Map,o=t[1];const i=t=>t[6].label;for(let e=0;e<o.length;e+=1){let r=Wt(t,o,e),l=i(r);s.set(l,n[e]=Xt(l,r))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=p()},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);l(t,e,s)},p(t,r){27&r&&(o=t[1],n=Y(n,r,i,1,t,o,s,e.parentNode,G,Xt,e,Wt))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&a(e)}}}function Jt(t){let e,n,s;return{c(){e=c("button"),h(e,"class","ml-2 is-small delete")},m(i,r){var a;l(i,e,r),n||(s=f(e,"click",(a=m((function(){o(t[3](t[8]))&&t[3](t[8]).apply(this,arguments)})),function(t){return t.stopPropagation(),a.call(this,t)})),n=!0)},p(e,n){t=e},d(t){t&&a(e),n=!1,s()}}}function Xt(t,e){let n,s,i,p,b,$,y,v,w,_=e[6].label+"",x=e[6].removable&&Jt(e);return{key:t,first:null,c(){n=c("li"),s=c("a"),i=c("span"),p=u(_),b=d(),x&&x.c(),$=d(),h(s,"href","#!"),h(n,"class",y=e[0]===e[6].value?"is-active":""),this.first=n},m(t,a){l(t,n,a),r(n,s),r(s,i),r(i,p),r(s,b),x&&x.m(s,null),r(n,$),v||(w=f(s,"click",m((function(){o(e[4].bind(void 0,e[6].value))&&e[4].bind(void 0,e[6].value).apply(this,arguments)}))),v=!0)},p(t,o){e=t,2&o&&_!==(_=e[6].label+"")&&g(p,_),e[6].removable?x?x.p(e,o):(x=Jt(e),x.c(),x.m(s,null)):x&&(x.d(1),x=null),3&o&&y!==(y=e[0]===e[6].value?"is-active":"")&&h(n,"class",y)},d(t){t&&a(n),x&&x.d(),v=!1,w()}}}function Kt(e){let n,s,o,i=e[1]&&Yt(e);return{c(){n=c("div"),s=c("ul"),i&&i.c(),this.c=t,h(n,"class",o="tabs "+(e[2]?"is-centered":""))},m(t,e){l(t,n,e),r(n,s),i&&i.m(s,null)},p(t,[e]){t[1]?i?i.p(t,e):(i=Yt(t),i.c(),i.m(s,null)):i&&(i.d(1),i=null),4&e&&o!==(o="tabs "+(t[2]?"is-centered":""))&&h(n,"class",o)},i:t,o:t,d(t){t&&a(n),i&&i.d()}}}function Qt(t,e,n){const s=k();let{tabs:o}=e,{active:i}=e,{centered:r=!0}=e;return t.$$set=t=>{"tabs"in t&&n(1,o=t.tabs),"active"in t&&n(0,i=t.active),"centered"in t&&n(2,r=t.centered)},[i,o,r,t=>()=>s("removed",t),function(t){i!==t&&(n(0,i=t),s("select",t))}]}customElements.define("tf-input",Gt);class Zt extends z{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Qt,Kt,i,{tabs:1,active:0,centered:2},null),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),V()))}static get observedAttributes(){return["tabs","active","centered"]}get tabs(){return this.$$.ctx[1]}set tabs(t){this.$$set({tabs:t}),V()}get active(){return this.$$.ctx[0]}set active(t){this.$$set({active:t}),V()}get centered(){return this.$$.ctx[2]}set centered(t){this.$$set({centered:t}),V()}}var te,ee;customElements.define("tf-tabs",Zt);const{GridClient:ne,Nodes:se}=null!==(ee=null===(te=window.configs)||void 0===te?void 0:te.grid3_client)&&void 0!==ee?ee:{};var oe,ie;const{GridClient:re}=null!==(ie=null===(oe=window.configs)||void 0===oe?void 0:oe.grid3_client)&&void 0!==ie?ie:{};function le(t,e,n={}){const{networkEnv:s}=t,o=new re("","","",null),{graphql:i}=o.getDefaultUrls(s);return fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,variables:n})}).then((t=>t.json())).then((({data:t})=>t))}function ae(t,e,n){const s=t.slice();return s[21]=e[n],s[22]=e,s[23]=n,s}function ce(t){let e,n,s;function o(e){t[18](e)}let i={field:{label:"Node ID",symbol:"nodeId",type:"number",placeholder:"Your Node ID",error:t[1]}};return void 0!==t[0]&&(i.data=t[0]),e=new Gt({props:i}),N.push((()=>J(e,"data",o))),{c(){X(e.$$.fragment)},m(t,n){K(e,t,n),s=!0},p(t,s){const o={};2&s&&(o.field={label:"Node ID",symbol:"nodeId",type:"number",placeholder:"Your Node ID",error:t[1]}),!n&&1&s&&(n=!0,o.data=t[0],C((()=>n=!1))),e.$set(o)},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){Q(e,t)}}}function ue(t){let e,n,s,o,i,p,m,b,g,$,y,v,w=[],_=new Map,x=t[3];const E=t=>t[21].symbol;for(let e=0;e<x.length;e+=1){let n=ae(t,x,e),s=E(n);_.set(s,w[e]=de(s,n))}function k(e){t[17](e)}let S={field:t[4]};return void 0!==t[0]&&(S.data=t[0]),b=new Gt({props:S}),N.push((()=>J(b,"data",k))),{c(){e=c("h5"),e.textContent="Nodes Filter",n=d();for(let t=0;t<w.length;t+=1)w[t].c();s=d(),o=c("button"),i=u("Apply Filters"),m=d(),X(b.$$.fragment),h(e,"class","is-size-5 has-text-weight-bold"),h(o,"class",p="button is-primary mt-2 "+(t[6]?"is-loading":"")),o.disabled=t[6],h(o,"type","button")},m(a,c){l(a,e,c),l(a,n,c);for(let t=0;t<w.length;t+=1)w[t].m(a,c);l(a,s,c),l(a,o,c),r(o,i),l(a,m,c),K(b,a,c),$=!0,y||(v=f(o,"click",t[8]),y=!0)},p(t,e){40&e&&(x=t[3],L(),w=Y(w,e,E,1,t,x,_,s.parentNode,W,de,s,ae),F()),(!$||64&e&&p!==(p="button is-primary mt-2 "+(t[6]?"is-loading":"")))&&h(o,"class",p),(!$||64&e)&&(o.disabled=t[6]);const n={};16&e&&(n.field=t[4]),!g&&1&e&&(g=!0,n.data=t[0],C((()=>g=!1))),b.$set(n)},i(t){if(!$){for(let t=0;t<x.length;t+=1)H(w[t]);H(b.$$.fragment,t),$=!0}},o(t){for(let t=0;t<w.length;t+=1)q(w[t]);q(b.$$.fragment,t),$=!1},d(t){t&&a(e),t&&a(n);for(let e=0;e<w.length;e+=1)w[e].d(t);t&&a(s),t&&a(o),t&&a(m),Q(b,t),y=!1,v()}}}function de(t,e){let n,s,o,i;function r(t){e[16](t,e[21])}let c={field:e[21]};return void 0!==e[5][e[21].symbol]&&(c.data=e[5][e[21].symbol]),s=new Gt({props:c}),N.push((()=>J(s,"data",r))),{key:t,first:null,c(){n=p(),X(s.$$.fragment),this.first=n},m(t,e){l(t,n,e),K(s,t,e),i=!0},p(t,n){e=t;const i={};8&n&&(i.field=e[21]),!o&&40&n&&(o=!0,i.data=e[5][e[21].symbol],C((()=>o=!1))),s.$set(i)},i(t){i||(H(s.$$.fragment,t),i=!0)},o(t){q(s.$$.fragment,t),i=!1},d(t){t&&a(n),Q(s,t)}}}function pe(e){let n,s,o,i,r,c,u;function f(t){e[15](t)}let m={field:e[7]};void 0!==e[2]&&(m.data=e[2]),n=new Gt({props:m}),N.push((()=>J(n,"data",f)));const h=[ue,ce],b=[];function g(t,e){return"automatic"===t[2]?0:"manual"===t[2]?1:-1}return~(i=g(e))&&(r=b[i]=h[i](e)),{c(){X(n.$$.fragment),o=d(),r&&r.c(),c=p(),this.c=t},m(t,e){K(n,t,e),l(t,o,e),~i&&b[i].m(t,e),l(t,c,e),u=!0},p(t,[e]){const o={};!s&&4&e&&(s=!0,o.data=t[2],C((()=>s=!1))),n.$set(o);let l=i;i=g(t),i===l?~i&&b[i].p(t,e):(r&&(L(),q(b[l],1,1,(()=>{b[l]=null})),F()),~i?(r=b[i],r?r.p(t,e):(r=b[i]=h[i](t),r.c()),H(r,1),r.m(c.parentNode,c)):r=null)},i(t){u||(H(n.$$.fragment,t),H(r),u=!0)},o(t){q(n.$$.fragment,t),q(r),u=!1},d(t){Q(n,t),t&&a(o),~i&&b[i].d(t),t&&a(c)}}}function fe(t,e,n){let{cpu:s}=e,{memory:o}=e,{ssd:i}=e,{publicIp:r}=e,{error:l=null}=e;const a=[{label:"Farm Name",symbol:"farmName",type:"select",placeholder:"Enter farm name",options:[{label:"Please select a farm",value:null,selected:!0}]},{label:"Country",symbol:"country",type:"select",placeholder:"Enter a country name",options:[{label:"Please select a country",value:null,selected:!0}]},{label:"CPU (Cores)",symbol:"cru",type:"number",placeholder:"Enter CPU"},{label:"Memory (GB)",symbol:"mru",type:"number",placeholder:"Enter Memory"},{label:"SSD (GB)",symbol:"sru",type:"number",placeholder:"Enter SSD size"}],c={label:"Node ID",type:"select",symbol:"nodeId",options:[{label:"Please select a node id.",value:null,selected:!0,disabled:!0}]};let u=null;const d={publicIPs:null,country:null,farmName:null,cru:null,mru:null,sru:null};let{profile:p}=e,f=!1;let m,{data:h}=e;function b(t,e="Loading..."){const s=a[t].options[0].label;return n(3,a[t].options[0].label=e,a),s}function g(t,e){const[s]=a[t].options;n(3,a[t].options=e.reduce(((t,{name:e,code:n})=>{const s={label:e,value:n||e};return t.push(s),t}),[s]),a)}return t.$$set=t=>{"cpu"in t&&n(9,s=t.cpu),"memory"in t&&n(10,o=t.memory),"ssd"in t&&n(11,i=t.ssd),"publicIp"in t&&n(12,r=t.publicIp),"error"in t&&n(1,l=t.error),"profile"in t&&n(13,p=t.profile),"data"in t&&n(0,h=t.data)},t.$$.update=()=>{if(7680&t.$$.dirty&&(s&&n(5,d.cru=s,d),o&&n(5,d.mru=Math.round(o/1024),d),i&&n(5,d.sru=i,d),n(5,d.publicIPs=r,d)),24580&t.$$.dirty&&"automatic"===u&&p&&p.networkEnv!==m){n(14,m=p.networkEnv);const t=b(0),e=b(1);(function(t){return le(t,"\nquery GetLimits {\n    farms: farmsConnection { farms_limit: totalCount }\n    countries: countriesConnection { countries_limit: totalCount }\n}\n").then((({farms:{farms_limit:t},countries:{countries_limit:e}})=>({farms_limit:t,countries_limit:e}))).then((e=>le(t,"\nquery GetData($farms_limit: Int!, $countries_limit: Int!) {\n    farms(limit: $farms_limit) { name }\n    countries(limit: $countries_limit) { name code }\n}\n",e)))})(p).then((({farms:t,countries:e})=>{g(0,t),g(1,e)})).catch((t=>{console.log("Error",t)})).finally((()=>{b(0,t),b(1,e)}))}},[h,l,u,a,c,d,f,{label:"Node Selection",type:"select",symbol:"value",options:[{label:"Choose a way to select node",value:null,selected:!0,disabled:!0},{label:"Automatic",value:"automatic"},{label:"Manual",value:"manual"}]},function(){n(6,f=!0);const t=c.options[0].label;n(4,c.options[0].label="Loading...",c),function(t,e){return new Promise((async n=>{const{networkEnv:s}=e,o=new ne("","","",null),{graphql:i,rmbProxy:r}=o.getDefaultUrls(s),l=new se(i,r);try{n((await l.filterNodes(t)).map((t=>({label:`NodeID(${t.nodeId})`,value:t.nodeId}))))}catch(t){console.log("Error findNodes",t),n([])}}))}(d,p).then((e=>{n(4,c.options[0].label=t,c);const[s]=c.options;e.unshift(s),n(4,c.options=e,c)})).catch((t=>{console.log("Error",t)})).finally((()=>{n(6,f=!1),n(4,c.options[0].label=t,c)}))},s,o,i,r,p,m,function(t){u=t,n(2,u)},function(e,l){t.$$.not_equal(d[l.symbol],e)&&(d[l.symbol]=e,n(5,d),n(9,s),n(10,o),n(11,i),n(12,r))},function(t){h=t,n(0,h)},function(t){h=t,n(0,h)}]}class me extends z{constructor(t){super(),tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},fe,pe,i,{cpu:9,memory:10,ssd:11,publicIp:12,error:1,profile:13,data:0},null),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),V()))}static get observedAttributes(){return["cpu","memory","ssd","publicIp","error","profile","data"]}get cpu(){return this.$$.ctx[9]}set cpu(t){this.$$set({cpu:t}),V()}get memory(){return this.$$.ctx[10]}set memory(t){this.$$set({memory:t}),V()}get ssd(){return this.$$.ctx[11]}set ssd(t){this.$$set({ssd:t}),V()}get publicIp(){return this.$$.ctx[12]}set publicIp(t){this.$$set({publicIp:t}),V()}get error(){return this.$$.ctx[1]}set error(t){this.$$set({error:t}),V()}get profile(){return this.$$.ctx[13]}set profile(t){this.$$set({profile:t}),V()}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),V()}}function he(t){let e;return{c(){e=u("Deploy")},m(t,n){l(t,e,n)},d(t){t&&a(e)}}}function be(t){let e;return{c(){e=u("Back")},m(t,n){l(t,e,n)},d(t){t&&a(e)}}}function ge(e){let n,s,o,i,u;function d(t,e){return t[1]||t[2]?be:he}let p=d(e),m=p(e);return{c(){n=c("div"),s=c("button"),m.c(),this.c=t,h(s,"class",o="button is-primary "+(e[0]?"is-loading":"")),h(s,"type","submit"),s.disabled=e[3],h(n,"class","is-flex is-justify-content-flex-end is-align-items-center")},m(t,o){l(t,n,o),r(n,s),m.m(s,null),i||(u=f(s,"click",e[4]),i=!0)},p(t,[e]){p!==(p=d(t))&&(m.d(1),m=p(t),m&&(m.c(),m.m(s,null))),1&e&&o!==(o="button is-primary "+(t[0]?"is-loading":""))&&h(s,"class",o),8&e&&(s.disabled=t[3])},i:t,o:t,d(t){t&&a(n),m.d(),i=!1,u()}}}function $e(t,e,n){let{loading:s}=e,{success:o}=e,{failed:i}=e,{disabled:r}=e;return t.$$set=t=>{"loading"in t&&n(0,s=t.loading),"success"in t&&n(1,o=t.success),"failed"in t&&n(2,i=t.failed),"disabled"in t&&n(3,r=t.disabled)},[s,o,i,r,function(e){S.call(this,t,e)}]}customElements.define("tf-select-node-id",me);class ye extends z{constructor(t){super(),tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},$e,ge,i,{loading:0,success:1,failed:2,disabled:3},null),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),V()))}static get observedAttributes(){return["loading","success","failed","disabled"]}get loading(){return this.$$.ctx[0]}set loading(t){this.$$set({loading:t}),V()}get success(){return this.$$.ctx[1]}set success(t){this.$$set({success:t}),V()}get failed(){return this.$$.ctx[2]}set failed(t){this.$$set({failed:t}),V()}get disabled(){return this.$$.ctx[3]}set disabled(t){this.$$set({disabled:t}),V()}}function ve(e){let n,s,o;return{c(){n=c("div"),s=u(e[1]),this.c=t,h(n,"class",o="notification is-"+e[0])},m(t,e){l(t,n,e),r(n,s)},p(t,[e]){2&e&&g(s,t[1]),1&e&&o!==(o="notification is-"+t[0])&&h(n,"class",o)},i:t,o:t,d(t){t&&a(n)}}}function we(t,e,n){let{type:s}=e,{message:o}=e;return t.$$set=t=>{"type"in t&&n(0,s=t.type),"message"in t&&n(1,o=t.message)},[s,o]}customElements.define("tf-deploy-btn",ye);class _e extends z{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},we,ve,i,{type:0,message:1},null),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),V()))}static get observedAttributes(){return["type","message"]}get type(){return this.$$.ctx[0]}set type(t){this.$$set({type:t}),V()}get message(){return this.$$.ctx[1]}set message(t){this.$$set({message:t}),V()}}function xe(t){let e,n,s,o,i,r,c;function u(e){t[12](e)}e=new Mt({}),e.$on("profile",t[11]);let f={tabs:t[8]};void 0!==t[5]&&(f.active=t[5]),s=new Zt({props:f}),N.push((()=>J(s,"active",u)));let m="base"===t[5]&&Ne(t);return{c(){X(e.$$.fragment),n=d(),X(s.$$.fragment),i=d(),m&&m.c(),r=p()},m(t,o){K(e,t,o),l(t,n,o),K(s,t,o),l(t,i,o),m&&m.m(t,o),l(t,r,o),c=!0},p(t,e){const n={};!o&&32&e&&(o=!0,n.active=t[5],C((()=>o=!1))),s.$set(n),"base"===t[5]?m?(m.p(t,e),32&e&&H(m,1)):(m=Ne(t),m.c(),H(m,1),m.m(r.parentNode,r)):m&&(L(),q(m,1,1,(()=>{m=null})),F())},i(t){c||(H(e.$$.fragment,t),H(s.$$.fragment,t),H(m),c=!0)},o(t){q(e.$$.fragment,t),q(s.$$.fragment,t),q(m),c=!1},d(t){Q(e,t),t&&a(n),Q(s,t),t&&a(i),m&&m.d(t),t&&a(r)}}}function Ee(t){let e,n;return e=new _e({props:{type:"danger",message:t[6]||"Domain name should be alphanumeric only"}}),{c(){X(e.$$.fragment)},m(t,s){K(e,t,s),n=!0},p(t,n){const s={};64&n&&(s.message=t[6]||"Domain name should be alphanumeric only"),e.$set(s)},i(t){n||(H(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function ke(t){let e,n;return e=new _e({props:{type:"danger",message:t[6]||"Failed to deploy VM."}}),{c(){X(e.$$.fragment)},m(t,s){K(e,t,s),n=!0},p(t,n){const s={};64&n&&(s.message=t[6]||"Failed to deploy VM."),e.$set(s)},i(t){n||(H(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Se(e){let n,s;return n=new _e({props:{type:"success",message:"Successfully deployed VM."}}),{c(){X(n.$$.fragment)},m(t,e){K(n,t,e),s=!0},p:t,i(t){s||(H(n.$$.fragment,t),s=!0)},o(t){q(n.$$.fragment,t),s=!1},d(t){Q(n,t)}}}function Pe(t){let e,n;return e=new _e({props:{type:"info",message:t[6]||"Loading..."}}),{c(){X(e.$$.fragment)},m(t,s){K(e,t,s),n=!0},p(t,n){const s={};64&n&&(s.message=t[6]||"Loading..."),e.$set(s)},i(t){n||(H(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Ne(t){let e,n,s,o,i,r;function c(e){t[13](e)}let u={field:t[9]};function p(e){t[14](e)}void 0!==t[0].name&&(u.data=t[0].name),e=new Gt({props:u}),N.push((()=>J(e,"data",c)));let f={cpu:t[0].cpu,memory:t[0].memory,ssd:t[0].disks.reduce(Ae,t[0].rootFsSize),profile:t[4]};return void 0!==t[0].nodeId&&(f.data=t[0].nodeId),o=new me({props:f}),N.push((()=>J(o,"data",p))),{c(){X(e.$$.fragment),s=d(),X(o.$$.fragment)},m(t,n){K(e,t,n),l(t,s,n),K(o,t,n),r=!0},p(t,s){const r={};!n&&1&s&&(n=!0,r.data=t[0].name,C((()=>n=!1))),e.$set(r);const l={};1&s&&(l.cpu=t[0].cpu),1&s&&(l.memory=t[0].memory),1&s&&(l.ssd=t[0].disks.reduce(Ae,t[0].rootFsSize)),16&s&&(l.profile=t[4]),!i&&1&s&&(i=!0,l.data=t[0].nodeId,C((()=>i=!1))),o.$set(l)},i(t){r||(H(e.$$.fragment,t),H(o.$$.fragment,t),r=!0)},o(t){q(e.$$.fragment,t),q(o.$$.fragment,t),r=!1},d(t){Q(e,t),t&&a(s),Q(o,t)}}}function Me(e){let n,s,o,i,u,p,b,g,$,v,w,_,x;const E=[Pe,Se,ke,Ee,xe],k=[];function S(t,e){return t[1]?0:t[2]?1:t[3]?2:4}return b=S(e),g=k[b]=E[b](e),v=new ye({props:{disabled:e[7],loading:e[1],failed:e[3],success:e[2]}}),v.$on("click",e[15]),{c(){n=c("div"),s=c("form"),o=c("h4"),o.textContent="Deploy a Peertube Instance",i=d(),u=c("hr"),p=d(),g.c(),$=d(),X(v.$$.fragment),this.c=t,h(o,"class","is-size-4"),h(s,"class","box"),y(n,"padding","15px")},m(t,a){l(t,n,a),r(n,s),r(s,o),r(s,i),r(s,u),r(s,p),k[b].m(s,null),r(s,$),K(v,s,null),w=!0,_||(x=f(s,"submit",m(e[10])),_=!0)},p(t,[e]){let n=b;b=S(t),b===n?k[b].p(t,e):(L(),q(k[n],1,1,(()=>{k[n]=null})),F(),g=k[b],g?g.p(t,e):(g=k[b]=E[b](t),g.c()),H(g,1),g.m(s,$));const o={};128&e&&(o.disabled=t[7]),2&e&&(o.loading=t[1]),8&e&&(o.failed=t[3]),4&e&&(o.success=t[2]),v.$set(o)},i(t){w||(H(g),H(v.$$.fragment,t),w=!0)},o(t){q(g),q(v.$$.fragment,t),w=!1},d(t){t&&a(n),k[b].d(),Q(v),_=!1,x()}}}customElements.define("tf-alert",_e);const Ae=(t,e)=>t+e.size;function Ie(t,e,n){let s;var o,i,r;const{events:l}=null!==(i=null===(o=window.configs)||void 0===o?void 0:o.grid3_client)&&void 0!==i?i:{},a=null===(r=window.configs)||void 0===r?void 0:r.deploymentStore;let c,u,d=new bt,p="base",f=!1,m=!1,h=!1;return t.$$.update=()=>{31&t.$$.dirty&&n(7,s=(f||!d.valid)&&!(m||h)||!c||""===c.mnemonics||""===c.storeSecret)},[d,f,m,h,c,p,u,s,[{label:"Base",value:"base"}],{label:"Name",placeholder:"Virtual Machine Name",symbol:"name",type:"text"},function(){function t(t){"string"==typeof t&&n(6,u=t)}n(1,f=!0),n(2,m=!1),n(3,h=!1),n(6,u=void 0),l.addListener("logs",t),St(d,c).then((()=>{a.set(0),!function(t){const e=new RegExp(/[^a-z\d]/i),n=new RegExp(/^\d/);return!(e.test(t)||n.test(t))}(d.name)?(n(3,h=!0),n(6,u="Name should be alphanumiric only")):n(2,m=!0)})).catch((t=>{n(3,h=!0),n(6,u="string"==typeof t?t:t.message)})).finally((()=>{n(1,f=!1),l.removeListener("logs",t)}))},({detail:t})=>{n(4,c=t),n(0,d.envs[0]=new ht(void 0,"SSH_KEY",t.sshKey),d)},function(t){p=t,n(5,p)},function(e){t.$$.not_equal(d.name,e)&&(d.name=e,n(0,d))},function(e){t.$$.not_equal(d.nodeId,e)&&(d.nodeId=e,n(0,d))},t=>{(m||h)&&(t.preventDefault(),n(2,m=!1),n(3,h=!1),n(1,f=!1))}]}customElements.define("tf-peertube",class extends z{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',tt(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Ie,Me,i,{},null),t&&t.target&&l(t.target,this,t.anchor)}})}();
