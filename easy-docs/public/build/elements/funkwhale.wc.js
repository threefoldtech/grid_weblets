!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function d(){return u(" ")}function p(){return u("")}function f(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function m(t){return function(e){return e.preventDefault(),t.call(this,e)}}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t){return""===t?null:+t}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function y(t,e,n,s){t.style.setProperty(e,n,s?"important":"")}function v(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}t.selectedIndex=-1}function w(t){const e={};for(const n of t)e[n.name]=n.value;return e}let x;function _(t){x=t}function k(){if(!x)throw new Error("Function called outside component initialization");return x}function I(t){k().$$.on_mount.push(t)}function E(){const t=k();return(e,n)=>{const s=t.$$.callbacks[e];if(s){const i=function(t,e,n=!1){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,!1,e),s}(e,n);s.slice().forEach((e=>{e.call(t,i)}))}}}function N(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const P=[],S=[],C=[],A=[],M=Promise.resolve();let D=!1;function O(t){C.push(t)}function j(t){A.push(t)}let F=!1;const L=new Set;function R(){if(!F){F=!0;do{for(let t=0;t<P.length;t+=1){const e=P[t];_(e),T(e.$$)}for(_(null),P.length=0;S.length;)S.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];L.has(e)||(L.add(e),e())}C.length=0}while(P.length);for(;A.length;)A.pop()();D=!1,F=!1,L.clear()}}function T(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const q=new Set;let z,U;function V(){z={r:0,c:[],p:z}}function H(){z.r||s(z.c),z=z.p}function B(t,e){t&&t.i&&(q.delete(t),t.i(e))}function G(t,e,n,s){if(t&&t.o){if(q.has(t))return;q.add(t),z.c.push((()=>{q.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}function W(t,e){t.d(1),e.delete(t.key)}function Y(t,e){G(t,1,1,(()=>{e.delete(t.key)}))}function J(t,e,n,s,i,o,l,r,a,c,u,d){let p=t.length,f=o.length,m=p;const h={};for(;m--;)h[t[m].key]=m;const g=[],$=new Map,b=new Map;for(m=f;m--;){const t=d(i,o,m),r=n(t);let a=l.get(r);a?s&&a.p(t,e):(a=c(r,t),a.c()),$.set(r,g[m]=a),r in h&&b.set(r,Math.abs(m-h[r]))}const y=new Set,v=new Set;function w(t){B(t,1),t.m(r,u),l.set(t.key,t),u=t.first,f--}for(;p&&f;){const e=g[f-1],n=t[p-1],s=e.key,i=n.key;e===n?(u=e.first,p--,f--):$.has(i)?!l.has(s)||y.has(s)?w(e):v.has(i)?p--:b.get(s)>b.get(i)?(v.add(s),w(e)):(y.add(i),p--):(a(n,l),p--)}for(;p--;){const e=t[p];$.has(e.key)||a(e,l)}for(;f;)w(g[f-1]);return g}function K(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function X(t){t&&t.c()}function Q(t,n,o,l){const{fragment:r,on_mount:a,on_destroy:c,after_update:u}=t.$$;r&&r.m(n,o),l||O((()=>{const n=a.map(e).filter(i);c?c.push(...n):s(n),t.$$.on_mount=[]})),u.forEach(O)}function Z(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function tt(t,e){-1===t.$$.dirty[0]&&(P.push(t),D||(D=!0,M.then(R)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function et(e,i,o,l,r,c,u,d=[-1]){const p=x;_(e);const f=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(p?p.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:i.target||p.$$.root};u&&u(f.root);let m=!1;if(f.ctx=o?o(e,i.props||{},((t,n,...s)=>{const i=s.length?s[0]:n;return f.ctx&&r(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),m&&tt(e,t)),n})):[],f.update(),m=!0,s(f.before_update),f.fragment=!!l&&l(f.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);f.fragment&&f.fragment.l(t),t.forEach(a)}else f.fragment&&f.fragment.c();i.intro&&B(e.$$.fragment),Q(e,i.target,i.anchor,i.customElement),R()}_(p)}var nt;"function"==typeof HTMLElement&&(U=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(i);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){s(this.$$.on_disconnect)}$destroy(){Z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var st=new Uint8Array(16);function it(){if(!nt&&!(nt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nt(st)}var ot=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function lt(t){return"string"==typeof t&&ot.test(t)}for(var rt,at,ct,ut,dt=[],pt=0;pt<256;++pt)dt.push((pt+256).toString(16).substr(1));function ft(t,e,n){var s=(t=t||{}).random||(t.rng||it)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=s[i];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(dt[t[e+0]]+dt[t[e+1]]+dt[t[e+2]]+dt[t[e+3]]+"-"+dt[t[e+4]]+dt[t[e+5]]+"-"+dt[t[e+6]]+dt[t[e+7]]+"-"+dt[t[e+8]]+dt[t[e+9]]+"-"+dt[t[e+10]]+dt[t[e+11]]+dt[t[e+12]]+dt[t[e+13]]+dt[t[e+14]]+dt[t[e+15]]).toLowerCase();if(!lt(n))throw TypeError("Stringified UUID is invalid");return n}(s)}function mt(t){const e=+t;return"number"==typeof e&&!isNaN(e)&&e>0&&e.toFixed(0)===e.toString()}class ht{constructor(t=null,e={publicIPs:null,country:null,farmName:null,cru:null,mru:null,sru:null,update:(t,e)=>{this.filters[t]=e}}){this.type=t,this.filters=e}}class gt{constructor(t="NW"+ft().split("-")[0],e="10.20.0.0/16"){this.name=t,this.ipRange=e}get valid(){const{name:t,ipRange:e}=this;return""!==t&&""!==e}}class $t{constructor(t=ft(),e="SSH_KEY",n="ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDTwULSsUubOq3VPWL6cdrDvexDmjfznGydFPyaNcn7gAL9lRxwFbCDPMj7MbhNSpxxHV2+/iJPQOTVJu4oc1N7bPP3gBCnF51rPrhTpGCt5pBbTzeyNweanhedkKDsCO2mIEh/92Od5Hg512dX4j7Zw6ipRWYSaepapfyoRnNSriW/s3DH/uewezVtL5EuypMdfNngV/u2KZYWoeiwhrY/yEUykQVUwDysW/xUJNP5o+KSTAvNSJatr3FbuCFuCjBSvageOLHePTeUwu6qjqe+Xs4piF1ByO/6cOJ8bt5Vcx0bAtI8/MPApplUU/JWevsPNApvnA/ntffI+u8DCwgP"){this.id=t,this.key=e,this.value=n}get valid(){const{key:t,value:e}=this;return""!==t&&""!==e}}class bt{constructor(t=ft(),e="VM"+t.split("-")[0],n="https://hub.grid.tf/tf-official-apps/base:latest.flist",s=4,i=8192,o="/sbin/zinit init",l=!0,r=null,a=25,c=new gt,u=[],d=[],p=!1,f=new ht){this.id=t,this.name=e,this.flist=n,this.cpu=s,this.memory=i,this.entrypoint=o,this.planetary=l,this.nodeId=r,this.rootFsSize=a,this.network=c,this.envs=u,this.disks=d,this.publicIp=p,this.selection=f}get valid(){const{name:t,flist:e,cpu:n,memory:s,entrypoint:i,nodeId:o}=this,{rootFsSize:l,network:r,envs:a,disks:c}=this;return""!==t&&""!==e&&""!==i&&mt(n)&&mt(s)&&mt(o)&&mt(l)&&r.valid&&a.reduce(((t,e)=>t&&e.valid),!0)&&c.reduce(((t,e)=>t&&e.valid),!0)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */async function yt(t,e){return 0==(await t.gateway.getObj(e)).length?e:e+Math.floor(1e3*Math.random())}const{HTTPMessageBusClient:vt}=null!==(at=null===(rt=window.configs)||void 0===rt?void 0:rt.client)&&void 0!==at?at:{},{DiskModel:wt,MachineModel:xt,MachinesModel:_t,GridClient:kt,GatewayNameModel:It,NetworkModel:Et,Nodes:Nt}=null!==(ut=null===(ct=window.configs)||void 0===ct?void 0:ct.grid3_client)&&void 0!==ut?ut:{};let Pt,St;async function Ct(t,e){const n=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]])}return n}(t,["envs","disks"]);let{name:s,flist:i,cpu:o,memory:l,entrypoint:r,network:a}=n;const{publicIp:c,planetary:u,nodeId:d,rootFsSize:p}=n,{mnemonics:f,storeSecret:m,networkEnv:h}=e,g=new vt(0,""),$=new kt(h,f,m,g,void 0,"tfkvstore");await $.connect(),s=await yt($,s),console.log(s);const b=new Nt(kt.config.graphqlURL,kt.config.rmbClient.proxyURL),y=await async function(t,e){const n=await async function(t){return await t.getAccessNodes()}(t);return n[e].domain}(b,8);Pt=`${s}.${y}`;const v=new Et;v.name=s+"NW",v.ip_range="10.1.0.0/16",await async function(t,e,n,s,i){const o=new wt;o.name=e+"Disk",o.size=10,o.mountpoint="/data";const l=new xt;l.name=e,l.node_id=s,l.disks=[o],l.public_ip=!1,l.planetary=!0,l.cpu=4,l.memory=8192,l.rootfs_size=2,l.flist="https://hub.grid.tf/omar0.3bot/omarelawady-funk-latest.flist",l.entrypoint="/init.sh",l.env={FUNKWHALE_HOSTNAME:i};const r=new _t;return r.name=e,r.network=n,r.machines=[l],t.machines.deploy(r).then((t=>(window.configs.baseConfig.updateBalance(),t)))}($,s,v,d,Pt);const w=await async function(t,e){return await t.machines.getObj(e)}($,s);St=w[0].yggIP,await async function(t,e,n){const s=new It;return s.name=e,s.node_id=8,s.tls_passthrough=!1,s.backends=[`http://[${n}]:80/`],t.gateway.deploy_name(s)}($,s,St);const x=await async function(t,e){return await t.gateway.getObj(e)}($,s);x[0].domain}function At(e){return{c(){this.c=t},m:t,p:t,i:t,o:t,d:t}}function Mt(t){var e;const n=null===(e=window.configs)||void 0===e?void 0:e.baseConfig,s=E();let i;var o;return I((()=>{i=n.subscribe((()=>{s("profile",n.getActiveProfile())}))})),o=()=>{i()},k().$$.on_destroy.push(o),[]}class Dt extends U{constructor(t){super(),et(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Mt,At,o,{},null),t&&t.target&&r(t.target,this,t.anchor)}}function Ot(t,e,n){const s=t.slice();return s[21]=e[n],s}function jt(t){let e,n,s;function i(t,e){return null==n&&(n=!!t[6]()),n?Rt:"checkbox"===t[1].type?Lt:"select"===t[1].type?Ft:void 0}let o=i(t),u=o&&o(t),p=t[1].tooltip&&Wt(t);return{c(){e=c("div"),u&&u.c(),s=d(),p&&p.c(),h(e,"class","tooltip mb-2")},m(t,n){r(t,e,n),u&&u.m(e,null),l(e,s),p&&p.m(e,null)},p(t,n){o===(o=i(t))&&u?u.p(t,n):(u&&u.d(1),u=o&&o(t),u&&(u.c(),u.m(e,s))),t[1].tooltip?p?p.p(t,n):(p=Wt(t),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},d(t){t&&a(e),u&&u.d(),p&&p.d()}}}function Ft(t){let e,n,i,o,u,p,m,g,$=[],b=new Map,w=t[1].label&&Tt(t),x=t[1].options;const _=t=>t[21].value;for(let e=0;e<x.length;e+=1){let n=Ot(t,x,e),s=_(n);b.set(s,$[e]=qt(s,n))}let k=(t[1].error||t[2])&&zt(t);return{c(){w&&w.c(),e=d(),n=c("div"),i=c("select");for(let t=0;t<$.length;t+=1)$[t].c();u=d(),k&&k.c(),i.disabled=o=t[1].disabled,y(i,"width","100%"),void 0===t[0]&&O((()=>t[19].call(i))),h(n,"class",p="select mb-2"+(t[1].error||t[2]?" is-danger":"")),y(n,"width","100%"),h(n,"id",t[5])},m(s,o){w&&w.m(s,o),r(s,e,o),r(s,n,o),l(n,i);for(let t=0;t<$.length;t+=1)$[t].m(i,null);v(i,t[0]),l(n,u),k&&k.m(n,null),m||(g=[f(i,"change",t[19]),f(i,"change",t[7])],m=!0)},p(t,s){t[1].label?w?w.p(t,s):(w=Tt(t),w.c(),w.m(e.parentNode,e)):w&&(w.d(1),w=null),2&s&&(x=t[1].options,$=J($,s,_,1,t,x,b,i,W,qt,null,Ot)),2&s&&o!==(o=t[1].disabled)&&(i.disabled=o),3&s&&v(i,t[0]),t[1].error||t[2]?k?k.p(t,s):(k=zt(t),k.c(),k.m(n,null)):k&&(k.d(1),k=null),6&s&&p!==(p="select mb-2"+(t[1].error||t[2]?" is-danger":""))&&h(n,"class",p)},d(t){w&&w.d(t),t&&a(e),t&&a(n);for(let t=0;t<$.length;t+=1)$[t].d();k&&k.d(),m=!1,s(g)}}}function Lt(t){let e,n,i,o,p,m,g,b,v,w,x,_=t[1].label+"";return{c(){e=c("div"),n=c("label"),i=c("input"),p=d(),m=c("span"),g=d(),b=c("label"),v=u(_),h(i,"class","switch__input"),h(i,"type","checkbox"),h(i,"id",t[5]),i.disabled=o=t[1].disabled,h(m,"class","slider"),h(n,"class","switch"),h(b,"for",t[5]),h(b,"class","label ml-2"),y(b,"cursor","pointer"),y(e,"display","flex"),y(e,"align-items","center"),h(e,"class","mb-2")},m(s,o){r(s,e,o),l(e,n),l(n,i),i.checked=t[0],l(n,p),l(n,m),l(e,g),l(e,b),l(b,v),w||(x=[f(i,"change",t[18]),f(i,"input",t[11])],w=!0)},p(t,e){2&e&&o!==(o=t[1].disabled)&&(i.disabled=o),3&e&&(i.checked=t[0]),2&e&&_!==(_=t[1].label+"")&&$(v,_)},d(t){t&&a(e),w=!1,s(x)}}}function Rt(t){let e,n,s,i,o,p,f,m=t[1].label+"";function g(t,e){return"textarea"===t[1].type?Bt:"text"===t[1].type?Ht:"number"===t[1].type?Vt:"password"===t[1].type?Ut:void 0}let b=g(t),y=b&&b(t),v=(t[1].error||t[2])&&Gt(t);return{c(){e=c("div"),n=c("p"),s=u(m),i=d(),o=c("div"),y&&y.c(),f=d(),v&&v.c(),h(n,"class","label"),h(o,"class",p="control"+("password"===t[1].type?" has-icons-right":"")),h(e,"class","field"),h(e,"id",t[5])},m(t,a){r(t,e,a),l(e,n),l(n,s),l(e,i),l(e,o),y&&y.m(o,null),l(e,f),v&&v.m(e,null)},p(t,n){2&n&&m!==(m=t[1].label+"")&&$(s,m),b===(b=g(t))&&y?y.p(t,n):(y&&y.d(1),y=b&&b(t),y&&(y.c(),y.m(o,null))),2&n&&p!==(p="control"+("password"===t[1].type?" has-icons-right":""))&&h(o,"class",p),t[1].error||t[2]?v?v.p(t,n):(v=Gt(t),v.c(),v.m(e,null)):v&&(v.d(1),v=null)},d(t){t&&a(e),y&&y.d(),v&&v.d()}}}function Tt(t){let e,n,s=t[1].label+"";return{c(){e=c("p"),n=u(s),h(e,"class","label")},m(t,s){r(t,e,s),l(e,n)},p(t,e){2&e&&s!==(s=t[1].label+"")&&$(n,s)},d(t){t&&a(e)}}}function qt(t,e){let n,s,i,o,p,f,m=e[21].label+"";return{key:t,first:null,c(){n=c("option"),s=u(m),i=d(),n.__value=o=e[21].value,n.value=n.__value,n.selected=p=e[21].selected,n.disabled=f=e[21].disabled,this.first=n},m(t,e){r(t,n,e),l(n,s),l(n,i)},p(t,i){e=t,2&i&&m!==(m=e[21].label+"")&&$(s,m),2&i&&o!==(o=e[21].value)&&(n.__value=o,n.value=n.__value),2&i&&p!==(p=e[21].selected)&&(n.selected=p),2&i&&f!==(f=e[21].disabled)&&(n.disabled=f)},d(t){t&&a(n)}}}function zt(t){let e,n,s=(t[1].error||t[2])+"";return{c(){e=c("p"),n=u(s),h(e,"class","help is-danger")},m(t,s){r(t,e,s),l(e,n)},p(t,e){6&e&&s!==(s=(t[1].error||t[2])+"")&&$(n,s)},d(t){t&&a(e)}}}function Ut(t){let e,n,i,o,u,p,m,g,$,v;return{c(){e=c("input"),u=d(),p=c("span"),m=c("i"),h(e,"type","password"),h(e,"class",n="input"+(t[1].error||t[2]?" is-danger":"")),h(e,"placeholder",i=t[1].placeholder),e.disabled=o=t[1].disabled,h(m,"class",g="fas "+(t[3]?"far fa-eye-slash":"fa-eye")),y(p,"position","absolute"),y(p,"top","50%"),y(p,"right","15px"),y(p,"transform","translateY(-50%)"),y(p,"cursor","pointer")},m(n,s){r(n,e,s),b(e,t[0]),t[16](e),r(n,u,s),r(n,p,s),l(p,m),$||(v=[f(e,"input",t[15]),f(e,"input",t[8]),f(p,"click",t[17])],$=!0)},p(t,s){6&s&&n!==(n="input"+(t[1].error||t[2]?" is-danger":""))&&h(e,"class",n),2&s&&i!==(i=t[1].placeholder)&&h(e,"placeholder",i),2&s&&o!==(o=t[1].disabled)&&(e.disabled=o),3&s&&e.value!==t[0]&&b(e,t[0]),8&s&&g!==(g="fas "+(t[3]?"far fa-eye-slash":"fa-eye"))&&h(m,"class",g)},d(n){n&&a(e),t[16](null),n&&a(u),n&&a(p),$=!1,s(v)}}}function Vt(t){let e,n,i,o,l,u;return{c(){e=c("input"),h(e,"type","number"),h(e,"class",n="input"+(t[1].error||t[2]?" is-danger":"")),h(e,"placeholder",i=t[1].placeholder),e.disabled=o=t[1].disabled},m(n,s){r(n,e,s),b(e,t[0]),l||(u=[f(e,"input",t[14]),f(e,"input",t[8])],l=!0)},p(t,s){6&s&&n!==(n="input"+(t[1].error||t[2]?" is-danger":""))&&h(e,"class",n),2&s&&i!==(i=t[1].placeholder)&&h(e,"placeholder",i),2&s&&o!==(o=t[1].disabled)&&(e.disabled=o),3&s&&g(e.value)!==t[0]&&b(e,t[0])},d(t){t&&a(e),l=!1,s(u)}}}function Ht(t){let e,n,i,o,l,u;return{c(){e=c("input"),h(e,"type","text"),h(e,"class",n="input"+(t[1].error||t[2]?" is-danger":"")),h(e,"placeholder",i=t[1].placeholder),e.disabled=o=t[1].disabled},m(n,s){r(n,e,s),b(e,t[0]),l||(u=[f(e,"input",t[13]),f(e,"input",t[8])],l=!0)},p(t,s){6&s&&n!==(n="input"+(t[1].error||t[2]?" is-danger":""))&&h(e,"class",n),2&s&&i!==(i=t[1].placeholder)&&h(e,"placeholder",i),2&s&&o!==(o=t[1].disabled)&&(e.disabled=o),3&s&&e.value!==t[0]&&b(e,t[0])},d(t){t&&a(e),l=!1,s(u)}}}function Bt(t){let e,n,i,o,l,u;return{c(){e=c("textarea"),h(e,"class",n="textarea"+(t[1].error||t[2]?" is-danger":"")),h(e,"placeholder",i=t[1].placeholder),e.disabled=o=t[1].disabled},m(n,s){r(n,e,s),b(e,t[0]),l||(u=[f(e,"input",t[12]),f(e,"input",t[8])],l=!0)},p(t,s){6&s&&n!==(n="textarea"+(t[1].error||t[2]?" is-danger":""))&&h(e,"class",n),2&s&&i!==(i=t[1].placeholder)&&h(e,"placeholder",i),2&s&&o!==(o=t[1].disabled)&&(e.disabled=o),3&s&&b(e,t[0])},d(t){t&&a(e),l=!1,s(u)}}}function Gt(t){let e,n,s=(t[1].error||t[2])+"";return{c(){e=c("p"),n=u(s),h(e,"class","help is-danger")},m(t,s){r(t,e,s),l(e,n)},p(t,e){6&e&&s!==(s=(t[1].error||t[2])+"")&&$(n,s)},d(t){t&&a(e)}}}function Wt(t){let e,n,s=t[1].tooltip+"";return{c(){e=c("span"),n=u(s),h(e,"class","tooltip__text")},m(t,s){r(t,e,s),l(e,n)},p(t,e){2&e&&s!==(s=t[1].tooltip+"")&&$(n,s)},d(t){t&&a(e)}}}function Yt(e){let n,s,i,o=e[1]&&jt(e);return{c(){n=c("div"),s=d(),o&&o.c(),i=p(),this.c=t},m(t,l){r(t,n,l),n.innerHTML=e[9],r(t,s,l),o&&o.m(t,l),r(t,i,l)},p(t,[e]){t[1]?o?o.p(t,e):(o=jt(t),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},i:t,o:t,d(t){t&&a(n),t&&a(s),o&&o.d(t),t&&a(i)}}}function Jt(t,e,n){const s=E();let{field:i}=e,{data:o}=e,{selected:l=0}=e;const r=ft();let a;let c,u=!1;return t.$$set=t=>{"field"in t&&n(1,i=t.field),"data"in t&&n(0,o=t.data),"selected"in t&&n(10,l=t.selected)},[o,i,a,u,c,r,()=>["text","number","password","textarea"].includes(i.type),function(t){s("input",t);const e=t.target;n(10,l=e.selectedIndex)},function(t){if(i.validator){const e=t.target;n(2,a=i.validator(e.value))}s("input",t)},'\n<style>\n  @import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css");\n\n  .switch {\n    position: relative;\n    display: inline-block;\n    width: 60px;\n    height: 34px;\n  }\n\n  .switch .switch__input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n\n  .slider {\n    position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #ccc;\n    -webkit-transition: 0.4s;\n    transition: 0.4s;\n    border-radius: 34px;\n  }\n\n  .slider:before {\n    position: absolute;\n    content: "";\n    height: 26px;\n    width: 26px;\n    left: 4px;\n    bottom: 4px;\n    background-color: white;\n    -webkit-transition: 0.4s;\n    transition: 0.4s;\n    border-radius: 50%;\n  }\n\n  .switch__input:checked + .slider {\n    background-color: #2196f3;\n  }\n\n  .switch__input:checked + .slider {\n    box-shadow: 0 0 1px #2196f3;\n  }\n\n  .switch__input:checked + .slider:before {\n    -webkit-transform: translateX(26px);\n    -ms-transform: translateX(26px);\n    transform: translateX(26px);\n  }\n\n  .tooltip {\n    position: relative;\n  }\n\n  .tooltip__text {\n    position: absolute;\n    top: -20px;\n    left: 50%;\n    padding: 10px 15px;\n    border-radius: 5px;\n    background-color: rgba(51, 51, 51, 0.9);\n    color: white;\n    z-index: 9;\n    max-width: min(1000px, calc(100% - 30px));\n    display: block;\n\n    transition-property: opacity, transform, visibility;\n    transition-timing-function: ease;\n    transition-duration: 300ms;\n    pointer-events: none;\n    opacity: 0;\n    visibility: hidden;\n    transform: translateX(-50%) translateY(20px) scale(0);\n  }\n\n  .tooltip:hover > .tooltip__text {\n    pointer-events: all;\n    opacity: 1;\n    visibility: visible;\n    transform: translateX(-50%) translateY(0) scale(1);\n  }\n</style>\n',l,function(e){N.call(this,t,e)},function(){o=this.value,n(0,o),n(1,i)},function(){o=this.value,n(0,o),n(1,i)},function(){o=g(this.value),n(0,o),n(1,i)},function(){o=this.value,n(0,o),n(1,i)},function(t){S[t?"unshift":"push"]((()=>{c=t,n(4,c)}))},()=>{n(3,u=!u),n(4,c.type=u?"text":"password",c)},function(){o=this.checked,n(0,o),n(1,i)},function(){o=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(0,o),n(1,i)}]}customElements.define("tf-select-profile",Dt);class Kt extends U{constructor(t){super(),et(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Jt,Yt,o,{field:1,data:0,selected:10},null),t&&(t.target&&r(t.target,this,t.anchor),t.props&&(this.$set(t.props),R()))}static get observedAttributes(){return["field","data","selected"]}get field(){return this.$$.ctx[1]}set field(t){this.$$set({field:t}),R()}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),R()}get selected(){return this.$$.ctx[10]}set selected(t){this.$$set({selected:t}),R()}}function Xt(t,e,n){const s=t.slice();return s[7]=e[n],s[9]=n,s}function Qt(t){let e,n=[],s=new Map,i=t[1];const o=t=>t[7].label;for(let e=0;e<i.length;e+=1){let l=Xt(t,i,e),r=o(l);s.set(r,n[e]=te(r,l))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=p()},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);r(t,e,s)},p(t,l){51&l&&(i=t[1],n=J(n,l,o,1,t,i,s,e.parentNode,W,te,e,Xt))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&a(e)}}}function Zt(t){let e,n,s;return{c(){e=c("button"),h(e,"class","ml-2 is-small delete")},m(o,l){var a;r(o,e,l),n||(s=f(e,"click",(a=m((function(){i(t[4](t[9]))&&t[4](t[9]).apply(this,arguments)})),function(t){return t.stopPropagation(),a.call(this,t)})),n=!0)},p(e,n){t=e},d(t){t&&a(e),n=!1,s()}}}function te(t,e){let n,s,o,p,g,b,y,v,w,x=e[7].label+"",_=e[7].removable&&Zt(e);return{key:t,first:null,c(){n=c("li"),s=c("a"),o=c("span"),p=u(x),g=d(),_&&_.c(),b=d(),h(s,"href","#!"),h(n,"class",y=e[0]===e[7].value?"is-active":""),this.first=n},m(t,a){r(t,n,a),l(n,s),l(s,o),l(o,p),l(s,g),_&&_.m(s,null),l(n,b),v||(w=f(s,"click",m((function(){i(e[5].bind(void 0,e[7].value))&&e[5].bind(void 0,e[7].value).apply(this,arguments)}))),v=!0)},p(t,i){e=t,2&i&&x!==(x=e[7].label+"")&&$(p,x),e[7].removable?_?_.p(e,i):(_=Zt(e),_.c(),_.m(s,null)):_&&(_.d(1),_=null),3&i&&y!==(y=e[0]===e[7].value?"is-active":"")&&h(n,"class",y)},d(t){t&&a(n),_&&_.d(),v=!1,w()}}}function ee(e){let n,s,i,o,u=e[1]&&Qt(e);return{c(){n=c("div"),s=c("ul"),u&&u.c(),this.c=t,h(s,"style",i=e[3]?"pointer-events: none; cursor: default;":""),h(n,"class",o="tabs "+(e[2]?"is-centered":""))},m(t,e){r(t,n,e),l(n,s),u&&u.m(s,null)},p(t,[e]){t[1]?u?u.p(t,e):(u=Qt(t),u.c(),u.m(s,null)):u&&(u.d(1),u=null),8&e&&i!==(i=t[3]?"pointer-events: none; cursor: default;":"")&&h(s,"style",i),4&e&&o!==(o="tabs "+(t[2]?"is-centered":""))&&h(n,"class",o)},i:t,o:t,d(t){t&&a(n),u&&u.d()}}}function ne(t,e,n){const s=E();let{tabs:i}=e,{active:o}=e,{centered:l=!0}=e,{disabled:r=!1}=e;return I((()=>{s("init")})),t.$$set=t=>{"tabs"in t&&n(1,i=t.tabs),"active"in t&&n(0,o=t.active),"centered"in t&&n(2,l=t.centered),"disabled"in t&&n(3,r=t.disabled)},[o,i,l,r,t=>()=>s("removed",t),function(t){o!==t&&(n(0,o=t),s("select",t))}]}customElements.define("tf-input",Kt);class se extends U{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',et(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},ne,ee,o,{tabs:1,active:0,centered:2,disabled:3},null),t&&(t.target&&r(t.target,this,t.anchor),t.props&&(this.$set(t.props),R()))}static get observedAttributes(){return["tabs","active","centered","disabled"]}get tabs(){return this.$$.ctx[1]}set tabs(t){this.$$set({tabs:t}),R()}get active(){return this.$$.ctx[0]}set active(t){this.$$set({active:t}),R()}get centered(){return this.$$.ctx[2]}set centered(t){this.$$set({centered:t}),R()}get disabled(){return this.$$.ctx[3]}set disabled(t){this.$$set({disabled:t}),R()}}var ie,oe;customElements.define("tf-tabs",se);const{GridClient:le,Nodes:re}=null!==(oe=null===(ie=window.configs)||void 0===ie?void 0:ie.grid3_client)&&void 0!==oe?oe:{};var ae,ce;const{GridClient:ue}=null!==(ce=null===(ae=window.configs)||void 0===ae?void 0:ae.grid3_client)&&void 0!==ce?ce:{};function de(t,e,n={}){const{networkEnv:s}=t,i=new ue("","","",null),{graphql:o}=i.getDefaultUrls(s);return fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,variables:n})}).then((t=>t.json())).then((({data:t})=>t))}function pe(t,e,n){const s=t.slice();return s[28]=e[n],s}function fe(t){let e,n,s,i,o,l;function c(e){t[22](e)}let u={field:t[11]};void 0!==t[0]&&(u.data=t[0]),e=new Kt({props:u}),S.push((()=>K(e,"data",c)));let f=t[7]&&t[0]&&he(t),m=!t[7]&&t[0]&&ge(t);return{c(){X(e.$$.fragment),s=d(),f&&f.c(),i=d(),m&&m.c(),o=p()},m(t,n){Q(e,t,n),r(t,s,n),f&&f.m(t,n),r(t,i,n),m&&m.m(t,n),r(t,o,n),l=!0},p(t,s){const l={};!n&&1&s&&(n=!0,l.data=t[0],j((()=>n=!1))),e.$set(l),t[7]&&t[0]?f?f.p(t,s):(f=he(t),f.c(),f.m(i.parentNode,i)):f&&(f.d(1),f=null),!t[7]&&t[0]?m?m.p(t,s):(m=ge(t),m.c(),m.m(o.parentNode,o)):m&&(m.d(1),m=null)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){G(e.$$.fragment,t),l=!1},d(t){Z(e,t),t&&a(s),f&&f.d(t),t&&a(i),m&&m.d(t),t&&a(o)}}}function me(t){let e,n,s,i,o,p,m,g,$,b,y,v,w=[],x=new Map,_=t[5];const k=t=>t[28].symbol;for(let e=0;e<_.length;e+=1){let n=pe(t,_,e),s=k(n);x.set(s,w[e]=ye(s,n))}function I(e){t[21](e)}let E={field:{label:`Node ID (Found ${t[6].options.length-1})`,type:"select",symbol:"nodeId",options:t[6].options}};return void 0!==t[0]&&(E.data=t[0]),g=new Kt({props:E}),S.push((()=>K(g,"data",I))),{c(){e=c("h5"),e.textContent="Nodes Filter",n=d();for(let t=0;t<w.length;t+=1)w[t].c();s=d(),i=c("button"),o=u("Apply filters and suggest nodes"),m=d(),X(g.$$.fragment),h(e,"class","is-size-5 has-text-weight-bold"),h(i,"class",p="button is-primary mt-2 "+(t[4]?"is-loading":"")),i.disabled=t[4],h(i,"type","button")},m(a,c){r(a,e,c),r(a,n,c);for(let t=0;t<w.length;t+=1)w[t].m(a,c);r(a,s,c),r(a,i,c),l(i,o),r(a,m,c),Q(g,a,c),b=!0,y||(v=f(i,"click",t[9]),y=!0)},p(t,e){1064&e&&(_=t[5],V(),w=J(w,e,k,1,t,_,x,s.parentNode,Y,ye,s,pe),H()),(!b||16&e&&p!==(p="button is-primary mt-2 "+(t[4]?"is-loading":"")))&&h(i,"class",p),(!b||16&e)&&(i.disabled=t[4]);const n={};64&e&&(n.field={label:`Node ID (Found ${t[6].options.length-1})`,type:"select",symbol:"nodeId",options:t[6].options}),!$&&1&e&&($=!0,n.data=t[0],j((()=>$=!1))),g.$set(n)},i(t){if(!b){for(let t=0;t<_.length;t+=1)B(w[t]);B(g.$$.fragment,t),b=!0}},o(t){for(let t=0;t<w.length;t+=1)G(w[t]);G(g.$$.fragment,t),b=!1},d(t){t&&a(e),t&&a(n);for(let e=0;e<w.length;e+=1)w[e].d(t);t&&a(s),t&&a(i),t&&a(m),Z(g,t),y=!1,v()}}}function he(t){let e,n,s;return{c(){e=c("p"),n=u("Validating node "),s=u(t[0]),h(e,"class","help is-success")},m(t,i){r(t,e,i),l(e,n),l(e,s)},p(t,e){1&e&&$(s,t[0])},d(t){t&&a(e)}}}function ge(t){let e;function n(t,e){return"valid"==t[2]?be:"invalid"===t[2]?$e:void 0}let s=n(t),i=s&&s(t);return{c(){i&&i.c(),e=p()},m(t,n){i&&i.m(t,n),r(t,e,n)},p(t,o){s===(s=n(t))&&i?i.p(t,o):(i&&i.d(1),i=s&&s(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i&&i.d(t),t&&a(e)}}}function $e(t){let e,n,s,i,o;return{c(){e=c("p"),n=u("Node("),s=c("strong"),i=u(t[0]),o=u(") might be down or doesn't have enough\n        resources"),h(e,"class","help is-danger")},m(t,a){r(t,e,a),l(e,n),l(e,s),l(s,i),l(e,o)},p(t,e){1&e&&$(i,t[0])},d(t){t&&a(e)}}}function be(t){let e,n,s,i,o;return{c(){e=c("p"),n=u("Node("),s=c("strong"),i=u(t[0]),o=u(") is up and has enough resources"),h(e,"class","help is-success")},m(t,a){r(t,e,a),l(e,n),l(e,s),l(s,i),l(e,o)},p(t,e){1&e&&$(i,t[0])},d(t){t&&a(e)}}}function ye(t,e){let n,s,o;return s=new Kt({props:{data:e[3][e[28].symbol],field:e[28]}}),s.$on("input",(function(){i(e[10](e[28].symbol))&&e[10](e[28].symbol).apply(this,arguments)})),{key:t,first:null,c(){n=p(),X(s.$$.fragment),this.first=n},m(t,e){r(t,n,e),Q(s,t,e),o=!0},p(t,n){e=t;const i={};40&n&&(i.data=e[3][e[28].symbol]),32&n&&(i.field=e[28]),s.$set(i)},i(t){o||(B(s.$$.fragment,t),o=!0)},o(t){G(s.$$.fragment,t),o=!1},d(t){t&&a(n),Z(s,t)}}}function ve(e){let n,s,i,o,l,c,u;function f(t){e[20](t)}let m={field:e[8]};void 0!==e[1]&&(m.data=e[1]),n=new Kt({props:m}),S.push((()=>K(n,"data",f)));const h=[me,fe],g=[];function $(t,e){return"automatic"===t[1]?0:"manual"===t[1]?1:-1}return~(o=$(e))&&(l=g[o]=h[o](e)),{c(){X(n.$$.fragment),i=d(),l&&l.c(),c=p(),this.c=t},m(t,e){Q(n,t,e),r(t,i,e),~o&&g[o].m(t,e),r(t,c,e),u=!0},p(t,[e]){const i={};!s&&2&e&&(s=!0,i.data=t[1],j((()=>s=!1))),n.$set(i);let r=o;o=$(t),o===r?~o&&g[o].p(t,e):(l&&(V(),G(g[r],1,1,(()=>{g[r]=null})),H()),~o?(l=g[o],l?l.p(t,e):(l=g[o]=h[o](t),l.c()),B(l,1),l.m(c.parentNode,c)):l=null)},i(t){u||(B(n.$$.fragment,t),B(l),u=!0)},o(t){G(n.$$.fragment,t),G(l),u=!1},d(t){Z(n,t),t&&a(i),~o&&g[o].d(t),t&&a(c)}}}function we(t){return"number"!=typeof(t=+t)?"Please select a node.":t<1?"Please select a valid node":void 0}function xe(t,e,n){var s,i;const{GridClient:o}=null!==(i=null===(s=window.configs)||void 0===s?void 0:s.grid3_client)&&void 0!==i?i:{};let{cpu:l}=e,{memory:r}=e,{ssd:a}=e,{publicIp:c}=e,{data:u}=e,{status:d}=e,{profile:p}=e,f=!1;const m=[{label:"Farm Name",symbol:"farmName",type:"select",placeholder:"Enter farm name",options:[{label:"Please select a farm",value:null,selected:!0}]},{label:"Country",symbol:"country",type:"select",placeholder:"Enter a country name",options:[{label:"Please select a country",value:null,selected:!0}]}],h={options:[{label:"Please select a node id.",value:null,selected:!0,disabled:!0}]};let g,{nodeSelection:$}=e,{filters:b}=e;function y(t,e="Loading..."){const s=m[t].options[0].label;return n(5,m[t].options[0].label=e,m),s}function v(t,e){const[s]=m[t].options;n(5,m[t].options=e.reduce(((t,{name:e,code:n})=>{const s={label:e,value:n||e};return t.push(s),t}),[s]),m)}const w={label:"Node ID",symbol:"nodeId",type:"number",placeholder:"Your Node ID",validator:we};let x,_,k=!1;return t.$$set=t=>{"cpu"in t&&n(12,l=t.cpu),"memory"in t&&n(13,r=t.memory),"ssd"in t&&n(14,a=t.ssd),"publicIp"in t&&n(15,c=t.publicIp),"data"in t&&n(0,u=t.data),"status"in t&&n(2,d=t.status),"profile"in t&&n(16,p=t.profile),"nodeSelection"in t&&n(1,$=t.nodeSelection),"filters"in t&&n(3,b=t.filters)},t.$$.update=()=>{if(61448&t.$$.dirty&&b&&(l&&b.update("cru",l),r&&b.update("mru",Math.round(r/1024)),a&&b.update("sru",a),b.update("publicIPs",c)),196610&t.$$.dirty&&"automatic"===$&&p&&p.networkEnv!==g){n(17,g=p.networkEnv);const t=y(0),e=y(1);(function(t){return de(t,"\nquery GetLimits {\n    farms: farmsConnection { farms_limit: totalCount }\n    countries: countriesConnection { countries_limit: totalCount }\n}\n").then((({farms:{farms_limit:t},countries:{countries_limit:e}})=>({farms_limit:t,countries_limit:e}))).then((e=>de(t,"\nquery GetData($farms_limit: Int!, $countries_limit: Int!) {\n    farms(limit: $farms_limit) { name }\n    countries(limit: $countries_limit) { name code }\n}\n",e)))})(p).then((({farms:t,countries:e})=>{v(0,t),v(1,e)})).catch((t=>{console.log("Error",t)})).finally((()=>{y(0,t),y(1,e)}))}if(851977&t.$$.dirty&&p&&_!==u)if(we(u)&&x)x.abort(),n(18,x=null),n(7,k=!1),n(2,d=null);else{n(19,_=u),x&&x.abort(),n(18,x=new AbortController);const{networkEnv:t}=p,e=new o("","","",null),{rmbProxy:s}=e.getDefaultUrls(t);n(7,k=!0),n(2,d=null),fetch(`${s}/nodes/${u}`,{method:"GET",signal:x.signal}).then((t=>t.json())).then((({capacity:t})=>{const{total:e,used:s}=t;if(e.cru-s.cru>=b.cru&&(e.sru-s.sru)/1024**3>=b.sru&&(e.mru-s.mru)/1024**3>=b.mru)return b.publicIPs?de(p,"query getFarmId($id: Int!) { nodes(where: { nodeId_eq: $id }) { id: farmId }}",{id:u}).then((({nodes:[{id:t}]})=>de(p,"query getIps($id: Int!) { publicIps(where: { contractId_eq: 0, farm: {farmId_eq: $id}}) {id}}",{id:t}))).then((({publicIps:t})=>{n(2,d=t.length>0?"valid":"invalid")})):void n(2,d="valid");n(2,d="invalid")})).catch((t=>{console.log("Error",t),t.message.includes("aborted a request")||n(2,d="invalid")})).finally((()=>{n(7,k=!1)}))}},[u,$,d,b,f,m,h,k,{label:"Node Selection",type:"select",symbol:"value",options:[{label:"Choose a way to select node",value:null,selected:!0,disabled:!0},{label:"Capacity filter",value:"automatic"},{label:"Manual",value:"manual"}]},function(){n(4,f=!0);const t=h.options[0].label;n(6,h.options[0].label="Loading...",h),function(t,e){return new Promise((async n=>{const{networkEnv:s}=e,i=new le("","","",null),{graphql:o,rmbProxy:l}=i.getDefaultUrls(s),r=new re(o,l);try{n((await r.filterNodes(t)).map((t=>({label:`NodeID(${t.nodeId})`,value:t.nodeId}))))}catch(t){console.log("Error findNodes",t),n([])}}))}({publicIPs:b.publicIPs,country:b.country,farmName:b.farmName,cru:b.cru,mru:b.mru,sru:b.sru},p).then((e=>{n(6,h.options[0].label=t,h);const[s]=h.options;e.unshift(s),n(6,h.options=e,h)})).catch((t=>{console.log("Error",t)})).finally((()=>{n(4,f=!1),n(6,h.options[0].label=t,h)}))},function(t){return e=>{const n=e.detail.target;b.update(t,n.value)}},w,l,r,a,c,p,g,x,_,function(t){$=t,n(1,$)},function(t){u=t,n(0,u)},function(t){u=t,n(0,u)}]}class _e extends U{constructor(t){super(),et(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},xe,ve,o,{cpu:12,memory:13,ssd:14,publicIp:15,data:0,status:2,profile:16,nodeSelection:1,filters:3},null),t&&(t.target&&r(t.target,this,t.anchor),t.props&&(this.$set(t.props),R()))}static get observedAttributes(){return["cpu","memory","ssd","publicIp","data","status","profile","nodeSelection","filters"]}get cpu(){return this.$$.ctx[12]}set cpu(t){this.$$set({cpu:t}),R()}get memory(){return this.$$.ctx[13]}set memory(t){this.$$set({memory:t}),R()}get ssd(){return this.$$.ctx[14]}set ssd(t){this.$$set({ssd:t}),R()}get publicIp(){return this.$$.ctx[15]}set publicIp(t){this.$$set({publicIp:t}),R()}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),R()}get status(){return this.$$.ctx[2]}set status(t){this.$$set({status:t}),R()}get profile(){return this.$$.ctx[16]}set profile(t){this.$$set({profile:t}),R()}get nodeSelection(){return this.$$.ctx[1]}set nodeSelection(t){this.$$set({nodeSelection:t}),R()}get filters(){return this.$$.ctx[3]}set filters(t){this.$$set({filters:t}),R()}}function ke(t){let e;return{c(){e=u("Deploy")},m(t,n){r(t,e,n)},d(t){t&&a(e)}}}function Ie(t){let e;return{c(){e=u("Back")},m(t,n){r(t,e,n)},d(t){t&&a(e)}}}function Ee(e){let n,s,i,o,u;function d(t,e){return t[1]||t[2]?Ie:ke}let p=d(e),m=p(e);return{c(){n=c("div"),s=c("button"),m.c(),this.c=t,h(s,"class",i="button is-primary "+(e[0]?"is-loading":"")),h(s,"type","submit"),s.disabled=e[3],h(n,"class","is-flex is-justify-content-flex-end is-align-items-center")},m(t,i){r(t,n,i),l(n,s),m.m(s,null),o||(u=f(s,"click",e[4]),o=!0)},p(t,[e]){p!==(p=d(t))&&(m.d(1),m=p(t),m&&(m.c(),m.m(s,null))),1&e&&i!==(i="button is-primary "+(t[0]?"is-loading":""))&&h(s,"class",i),8&e&&(s.disabled=t[3])},i:t,o:t,d(t){t&&a(n),m.d(),o=!1,u()}}}function Ne(t,e,n){let{loading:s}=e,{success:i}=e,{failed:o}=e,{disabled:l}=e;return t.$$set=t=>{"loading"in t&&n(0,s=t.loading),"success"in t&&n(1,i=t.success),"failed"in t&&n(2,o=t.failed),"disabled"in t&&n(3,l=t.disabled)},[s,i,o,l,function(e){N.call(this,t,e)}]}customElements.define("tf-select-node-id",_e);class Pe extends U{constructor(t){super(),et(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Ne,Ee,o,{loading:0,success:1,failed:2,disabled:3},null),t&&(t.target&&r(t.target,this,t.anchor),t.props&&(this.$set(t.props),R()))}static get observedAttributes(){return["loading","success","failed","disabled"]}get loading(){return this.$$.ctx[0]}set loading(t){this.$$set({loading:t}),R()}get success(){return this.$$.ctx[1]}set success(t){this.$$set({success:t}),R()}get failed(){return this.$$.ctx[2]}set failed(t){this.$$set({failed:t}),R()}get disabled(){return this.$$.ctx[3]}set disabled(t){this.$$set({disabled:t}),R()}}function Se(e){let n,s,i;return{c(){n=c("div"),s=u(e[1]),this.c=t,h(n,"class",i="notification is-"+e[0])},m(t,e){r(t,n,e),l(n,s)},p(t,[e]){2&e&&$(s,t[1]),1&e&&i!==(i="notification is-"+t[0])&&h(n,"class",i)},i:t,o:t,d(t){t&&a(n)}}}function Ce(t,e,n){let{type:s}=e,{message:i}=e;return t.$$set=t=>{"type"in t&&n(0,s=t.type),"message"in t&&n(1,i=t.message)},[s,i]}customElements.define("tf-deploy-btn",Pe);class Ae extends U{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',et(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Ce,Se,o,{type:0,message:1},null),t&&(t.target&&r(t.target,this,t.anchor),t.props&&(this.$set(t.props),R()))}static get observedAttributes(){return["type","message"]}get type(){return this.$$.ctx[0]}set type(t){this.$$set({type:t}),R()}get message(){return this.$$.ctx[1]}set message(t){this.$$set({message:t}),R()}}function Me(e){let n,s,i,o,p,f,m,g,b,v,w,x,_,k,I,E,N;return{c(){n=c("div"),s=u(e[1]),i=d(),o=c("hr"),p=d(),f=c("h3"),f.textContent="Deployment Info:",m=d(),g=c("ul"),b=c("li"),v=u("Domain: https://"),w=u(e[2]),x=u("/"),_=d(),k=c("li"),I=u("Planetary IP: "),E=u(e[3]),this.c=t,y(f,"font-weight","bold"),h(g,"class","ml-2"),h(n,"class",N="notification is-"+e[0])},m(t,e){r(t,n,e),l(n,s),l(n,i),l(n,o),l(n,p),l(n,f),l(n,m),l(n,g),l(g,b),l(b,v),l(b,w),l(b,x),l(g,_),l(g,k),l(k,I),l(k,E)},p(t,[e]){2&e&&$(s,t[1]),4&e&&$(w,t[2]),8&e&&$(E,t[3]),1&e&&N!==(N="notification is-"+t[0])&&h(n,"class",N)},i:t,o:t,d(t){t&&a(n)}}}function De(t,e,n){let{type:s}=e,{message:i}=e,{gateway:o}=e,{planetaryIP:l}=e;return t.$$set=t=>{"type"in t&&n(0,s=t.type),"message"in t&&n(1,i=t.message),"gateway"in t&&n(2,o=t.gateway),"planetaryIP"in t&&n(3,l=t.planetaryIP)},[s,i,o,l]}customElements.define("tf-alert",Ae);class Oe extends U{constructor(t){super(),et(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},De,Me,o,{type:0,message:1,gateway:2,planetaryIP:3},null),t&&(t.target&&r(t.target,this,t.anchor),t.props&&(this.$set(t.props),R()))}static get observedAttributes(){return["type","message","gateway","planetaryIP"]}get type(){return this.$$.ctx[0]}set type(t){this.$$set({type:t}),R()}get message(){return this.$$.ctx[1]}set message(t){this.$$set({message:t}),R()}get gateway(){return this.$$.ctx[2]}set gateway(t){this.$$set({gateway:t}),R()}get planetaryIP(){return this.$$.ctx[3]}set planetaryIP(t){this.$$set({planetaryIP:t}),R()}}function je(t){let e,n,s,i,o,l,c;function u(e){t[14](e)}e=new Dt({}),e.$on("profile",t[13]);let f={tabs:t[10]};void 0!==t[6]&&(f.active=t[6]),s=new se({props:f}),S.push((()=>K(s,"active",u)));let m="base"===t[6]&&Te(t);return{c(){X(e.$$.fragment),n=d(),X(s.$$.fragment),o=d(),m&&m.c(),l=p()},m(t,i){Q(e,t,i),r(t,n,i),Q(s,t,i),r(t,o,i),m&&m.m(t,i),r(t,l,i),c=!0},p(t,e){const n={};!i&&64&e&&(i=!0,n.active=t[6],j((()=>i=!1))),s.$set(n),"base"===t[6]?m?(m.p(t,e),64&e&&B(m,1)):(m=Te(t),m.c(),B(m,1),m.m(l.parentNode,l)):m&&(V(),G(m,1,1,(()=>{m=null})),H())},i(t){c||(B(e.$$.fragment,t),B(s.$$.fragment,t),B(m),c=!0)},o(t){G(e.$$.fragment,t),G(s.$$.fragment,t),G(m),c=!1},d(t){Z(e,t),t&&a(n),Z(s,t),t&&a(o),m&&m.d(t),t&&a(l)}}}function Fe(t){let e,n;return e=new Ae({props:{type:"danger",message:t[8]||"Failed to deploy VM."}}),{c(){X(e.$$.fragment)},m(t,s){Q(e,t,s),n=!0},p(t,n){const s={};256&n&&(s.message=t[8]||"Failed to deploy VM."),e.$set(s)},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function Le(e){let n,s;return n=new Oe({props:{type:"success",message:"Successfully Deployed A Funkwhale Instance",planetaryIP:St,gateway:Pt}}),{c(){X(n.$$.fragment)},m(t,e){Q(n,t,e),s=!0},p:t,i(t){s||(B(n.$$.fragment,t),s=!0)},o(t){G(n.$$.fragment,t),s=!1},d(t){Z(n,t)}}}function Re(t){let e,n;return e=new Ae({props:{type:"info",message:t[8]||"Loading..."}}),{c(){X(e.$$.fragment)},m(t,s){Q(e,t,s),n=!0},p(t,n){const s={};256&n&&(s.message=t[8]||"Loading..."),e.$set(s)},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function Te(t){let e,n,s,i,o,l,c,u;function p(e){t[15](e)}let f={field:t[7]};function m(e){t[16](e)}function h(e){t[17](e)}function g(e){t[18](e)}void 0!==t[0].name&&(f.data=t[0].name),e=new Kt({props:f}),S.push((()=>K(e,"data",p))),e.$on("input",t[12]);let $={publicIp:!1,cpu:t[0].cpu,memory:t[0].memory,ssd:t[0].disks.reduce(ze,t[0].rootFsSize),filters:t[0].selection.filters,profile:t[1]};return void 0!==t[0].nodeId&&($.data=t[0].nodeId),void 0!==t[0].selection.type&&($.nodeSelection=t[0].selection.type),void 0!==t[5]&&($.status=t[5]),i=new _e({props:$}),S.push((()=>K(i,"data",m))),S.push((()=>K(i,"nodeSelection",h))),S.push((()=>K(i,"status",g))),{c(){X(e.$$.fragment),s=d(),X(i.$$.fragment)},m(t,n){Q(e,t,n),r(t,s,n),Q(i,t,n),u=!0},p(t,s){const r={};128&s&&(r.field=t[7]),!n&&1&s&&(n=!0,r.data=t[0].name,j((()=>n=!1))),e.$set(r);const a={};1&s&&(a.cpu=t[0].cpu),1&s&&(a.memory=t[0].memory),1&s&&(a.ssd=t[0].disks.reduce(ze,t[0].rootFsSize)),1&s&&(a.filters=t[0].selection.filters),2&s&&(a.profile=t[1]),!o&&1&s&&(o=!0,a.data=t[0].nodeId,j((()=>o=!1))),!l&&1&s&&(l=!0,a.nodeSelection=t[0].selection.type,j((()=>l=!1))),!c&&32&s&&(c=!0,a.status=t[5],j((()=>c=!1))),i.$set(a)},i(t){u||(B(e.$$.fragment,t),B(i.$$.fragment,t),u=!0)},o(t){G(e.$$.fragment,t),G(i.$$.fragment,t),u=!1},d(t){Z(e,t),t&&a(s),Z(i,t)}}}function qe(e){let n,s,i,o,u,p,g,$,b,v,w,x,_;const k=[Re,Le,Fe,je],I=[];function E(t,e){return t[2]?0:t[3]?1:t[4]?2:3}return g=E(e),$=I[g]=k[g](e),v=new Pe({props:{disabled:e[9],loading:e[2],failed:e[4],success:e[3]}}),v.$on("click",e[19]),{c(){n=c("div"),s=c("form"),i=c("h4"),i.textContent="Deploy a Funkwhale Instance",o=d(),u=c("hr"),p=d(),$.c(),b=d(),X(v.$$.fragment),this.c=t,h(i,"class","is-size-4"),h(s,"class","box"),y(n,"padding","15px")},m(t,a){r(t,n,a),l(n,s),l(s,i),l(s,o),l(s,u),l(s,p),I[g].m(s,null),l(s,b),Q(v,s,null),w=!0,x||(_=f(s,"submit",m(e[11])),x=!0)},p(t,[e]){let n=g;g=E(t),g===n?I[g].p(t,e):(V(),G(I[n],1,1,(()=>{I[n]=null})),H(),$=I[g],$?$.p(t,e):($=I[g]=k[g](t),$.c()),B($,1),$.m(s,b));const i={};512&e&&(i.disabled=t[9]),4&e&&(i.loading=t[2]),16&e&&(i.failed=t[4]),8&e&&(i.success=t[3]),v.$set(i)},i(t){w||(B($),B(v.$$.fragment,t),w=!0)},o(t){G($),G(v.$$.fragment,t),w=!1},d(t){t&&a(n),I[g].d(),Z(v),x=!1,_()}}}customElements.define("tf-alert",Oe);const ze=(t,e)=>t+e.size;function Ue(t,e,n){let s;var i,o,l;const{events:r}=null!==(o=null===(i=window.configs)||void 0===i?void 0:i.grid3_client)&&void 0!==o?o:{},a=null===(l=window.configs)||void 0===l?void 0:l.deploymentStore,c=new bt;let u,d,p="base",f=!1,m=!1,h=!1;const g={label:"Name",placeholder:"Virtual Machine Name",symbol:"name",type:"text"};let $;return t.$$.update=()=>{63&t.$$.dirty&&n(9,s=(f||!c.valid)&&!(m||h)||!u||!c.name.match(/^[a-z][a-z0-9]*$/i)||"valid"!==d)},[c,u,f,m,h,d,p,g,$,s,[{label:"Base",value:"base"}],async function(){function t(t){"string"==typeof t&&n(8,$=t)}if(n(2,f=!0),n(3,m=!1),n(4,h=!1),n(8,$=void 0),!function(t,e=2){const{balance:n}=t;return n&&n>=e}(u))return n(4,h=!0),n(2,f=!1),void n(8,$="No enough balance to execute transaction requires 2 TFT at least in your wallet.");r.addListener("logs",t),Ct(c,u).then((()=>{a.set(0),n(3,m=!0),console.log(Pt),console.log(St)})).catch((t=>{n(4,h=!0),n(8,$="string"==typeof t?t:t.message)})).finally((()=>{n(2,f=!1),r.removeListener("logs",t)}))},function(t){const e=t.target;n(7,g.error=e.value.match(/^[a-z][a-z0-9]*$/i)?null:"Only alphanumeric names are allowed",g)},({detail:t})=>{n(1,u=t),n(0,c.envs[0]=new $t(void 0,"SSH_KEY",t.sshKey),c)},function(t){p=t,n(6,p)},function(e){t.$$.not_equal(c.name,e)&&(c.name=e,n(0,c))},function(e){t.$$.not_equal(c.nodeId,e)&&(c.nodeId=e,n(0,c))},function(e){t.$$.not_equal(c.selection.type,e)&&(c.selection.type=e,n(0,c))},function(t){d=t,n(5,d)},t=>{(m||h)&&(t.preventDefault(),n(3,m=!1),n(4,h=!1),n(2,f=!1))}]}customElements.define("tf-funkwhale",class extends U{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',et(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Ue,qe,o,{},null),t&&t.target&&r(t.target,this,t.anchor)}})}();
